<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
  <title>üßäüìö POLAR Documentation</title>
	<link rel="stylesheet" href="./github-markdown.css">
  <style>
    body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
    }
    @media (prefers-color-scheme: dark) {
      html {
        background-color: #0d1117;
      }
    }
  </style>
</head>
<body>
  <article class="markdown-body">
    <h1 id="generic-mapclient-api-%F0%9F%97%BA%EF%B8%8F-%40polar%2Fclient-generic" tabindex="-1">Generic MapClient API üó∫Ô∏è <code>@polar/client-generic</code></h1>
<p>This client is based on <a href="https://github.com/Dataport/polar">POLAR</a> and subsequently the <a href="https://bitbucket.org/geowerkstatt-hamburg/masterportalapi/src/master/">masterportalAPI</a>. The following documentation only contains how this specific client can be used, and the minimal information required to get it running.</p>

<p>For the development test deployments and example configurations, <a href="https://dataport.github.io/polar#plugin-gallery">see here</a>.</p>
<p>For a minimum working example, <a href="https://github.com/dopenguin/polar-fossgis-2024">see here</a>.</p>
<h2 id="basic-usage" tabindex="-1">Basic usage</h2>
<p>The NPM package <code>@polar/client-generic</code> can be installed via NPM or downloaded from the <a href="https://github.com/Dataport/polar/releases">release page</a>. When using <code>import mapClient from '@polar/client-generic'</code>, the object <code>mapClient</code> contains a method <code>createMap</code>. This is the main method required to get the client up and running. Should you use another import method, check the package's <code>dist</code> folder for available files.</p>
<p>The method expects a single object with the following parameters.</p>
<table>
<thead>
<tr>
<th>fieldName</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>containerId</td>
<td>string</td>
<td>ID of the container the map is supposed to render itself to.</td>
</tr>
<tr>
<td>services</td>
<td>object[] | string</td>
<td>Either a link to a service registry or an array containing service description objects. For more details, see the startup section on <a href="https://dataport.github.io/polar/documentation.html#configuration">POLAR documentation</a>. This parameter can be seen as an accessible version of <code>mapConfiguration.layerConf</code>.</td>
</tr>
<tr>
<td>mapConfiguration</td>
<td>object</td>
<td>See <a href="https://dataport.github.io/polar/docs/generic/core.html">documentation of <code>@polar/core</code></a> for all possible configuration options.</td>
</tr>
<tr>
<td>enabledPlugins</td>
<td>string[]?</td>
<td>This is a client-specific field. Since the <code>@polar/client-generic</code> client contains all existing plugins, they are activated by strings. The strings match their package names: <code>'address-search' | 'attributions' | 'draw'* | 'export' | 'filter'* | 'fullscreen'* | 'geo-location'* | 'gfi'* | 'icon-menu' | 'layer-chooser'* | 'legend' | 'loading-indicator' | 'pins' | 'reverse-geocoder' | 'scale' | 'toast' | 'zoom'*</code>. The plugins marked with * are nested in the <code>'icon-menu'</code> in this pre-layouting, hence they depend upon it being active, too.</td>
</tr>
<tr>
<td>modifyLayerConfiguration</td>
<td>((layerConf: object[]) =&gt; object[])?</td>
<td>Defaults to identity function. This function is applied to the loaded layer configuration before usage. That is, the <code>services</code> can be modified by this to e.g. set parameters not supported by the service register, add additional layers, and so on.</td>
</tr>
</tbody>
</table>
<p>In your HTML, a div with unique ID (<code>containerId</code> from above) is required that holds the following style properties. Width and height can be changed as you need, but are required to be defined.</p>
<pre><code class="language-html">&lt;div
  style=&quot;
    width: 680px;
    height: 420px;
    position: relative;
  &quot;
  id=&quot;polarstern&quot;
&gt;
  &lt;!-- Optional, may use if your page does not have its own &lt;noscript&gt; information --&gt;
  &lt;noscript&gt;Please use a browser with active JavaScript to use the map client.&lt;/noscript&gt;
&lt;/div&gt;
</code></pre>
<p><code>createMap</code> returns a Promise of a map instance. This returned instance is required to retrieve information from the map.</p>
<p>The package also includes a <code>style.css</code> and an <code>index.html</code> file. The <code>style.css</code>'s relative path must, if it isn't the default value <code>'./style.css'</code>, be included in the <code>mapConfiguration</code> as follows:</p>
<pre><code class="language-js">{
  // ...
  stylePath: '../the/relative/path/style.css'
}
</code></pre>
<p>The value to <code>stylePath</code> is the same as as a <code>link</code> tag would have in its <code>href</code>.</p>
<h3 id="destroy-instance" tabindex="-1">Destroy instance</h3>
<p>The <code>mapInstance</code> returned by the <code>createMap</code> call can be destroyed by calling <code>mapInstance.$destroy</code>. This will not remove the rendered HTML, but unlink all internal creations and effects. This should be called before re-navigating, usual lifecycle hooks are <code>beforeDestroy</code> or <code>beforeUnmount</code>, depending on the framework in use.</p>
<p>After this, <code>createMap</code> can be used again when the DOM is restored. That is, the original <code>div</code> with its <code>id</code> must be recreated, since POLAR changes the DOM in the <code>div</code>. Normally, an SPA will take care of this by itself since it will render the outlying component anew.</p>
<p>Should this not be the case in your framework, the following snippet restores the DOM:</p>
<pre><code class="language-js">// assuming the render div's id was `&quot;polarstern&quot;`
const polarstern = document.getElementById('polarstern-wrapper')
const newStar = document.createElement('div')
newStar.id = 'polarstern'
newStar.classList.add('polarstern')
polarstern?.parentElement?.replaceChild(newStar, polarstern)
</code></pre>

    <h2>Child documents</h2><nav><ul>
      <li><a href="core.html" target="_blank">core.html</a></li><li><a href="lib-custom-types.html" target="_blank">lib-custom-types.html</a></li><li><a href="plugin-address-search.html" target="_blank">plugin-address-search.html</a></li><li><a href="plugin-attributions.html" target="_blank">plugin-attributions.html</a></li><li><a href="plugin-draw.html" target="_blank">plugin-draw.html</a></li><li><a href="plugin-export.html" target="_blank">plugin-export.html</a></li><li><a href="plugin-filter.html" target="_blank">plugin-filter.html</a></li><li><a href="plugin-fullscreen.html" target="_blank">plugin-fullscreen.html</a></li><li><a href="plugin-geo-location.html" target="_blank">plugin-geo-location.html</a></li><li><a href="plugin-gfi.html" target="_blank">plugin-gfi.html</a></li><li><a href="plugin-icon-menu.html" target="_blank">plugin-icon-menu.html</a></li><li><a href="plugin-layer-chooser.html" target="_blank">plugin-layer-chooser.html</a></li><li><a href="plugin-legend.html" target="_blank">plugin-legend.html</a></li><li><a href="plugin-loading-indicator.html" target="_blank">plugin-loading-indicator.html</a></li><li><a href="plugin-pins.html" target="_blank">plugin-pins.html</a></li><li><a href="plugin-reverse-geocoder.html" target="_blank">plugin-reverse-geocoder.html</a></li><li><a href="plugin-scale.html" target="_blank">plugin-scale.html</a></li><li><a href="plugin-toast.html" target="_blank">plugin-toast.html</a></li><li><a href="plugin-zoom.html" target="_blank">plugin-zoom.html</a></li>
      </ul></nav>
  </article>
  <hr>
  <a href="https://github.com/Dataport/polar/blob/main/LEGALNOTICE.md" style="font-family: sans-serif;">Legal Notice (Impressum)</a>
</body>
</html>