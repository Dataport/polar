import{defineStore as U,storeToRefs as Ne}from"./pinia-pKSM4jaQ-DqtmlI-I.js";import{computed as m,ref as y,shallowRef as Ee,watch as Fe,markRaw as oe,reactive as Ie}from"./vue.runtime.esm-bundler-DO4OVoVe-Cwnajv_y.js";function De(i){return i==null||typeof i!="object"&&typeof i!="function"}function Ae(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function X(i){if(De(i))return i;if(Array.isArray(i)||Ae(i)||i instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&i instanceof SharedArrayBuffer)return i.slice(0);const e=Object.getPrototypeOf(i);if(e==null)return Object.assign(Object.create(e),i);const t=e.constructor;if(i instanceof Date||i instanceof Map||i instanceof Set)return new t(i);if(i instanceof RegExp){const s=new t(i);return s.lastIndex=i.lastIndex,s}if(i instanceof DataView)return new t(i.buffer.slice(0));if(i instanceof Error){let s;return i instanceof AggregateError?s=new t(i.errors,i.message,{cause:i.cause}):s=new t(i.message,{cause:i.cause}),s.stack=i.stack,Object.assign(s,i),s}if(typeof File<"u"&&i instanceof File)return new t([i],i.name,{type:i.type,lastModified:i.lastModified});if(typeof i=="object"){const s=Object.create(e);return Object.assign(s,i)}return i}function G(i){if(!i||typeof i!="object")return!1;const e=Object.getPrototypeOf(i);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(i)==="[object Object]":!1}function Te(i){return i==="__proto__"}function I(i,e,t){const s=Object.keys(e);for(let o=0;o<s.length;o++){const n=s[o];if(Te(n))continue;const a=e[n],r=i[n],l=t(r,a,n,i,e);l!==void 0?i[n]=l:Array.isArray(a)?Array.isArray(r)?i[n]=I(r,a,t):i[n]=I([],a,t):G(a)?G(r)?i[n]=I(r,a,t):i[n]=I({},a,t):(r===void 0||a!==void 0)&&(i[n]=a)}return i}function Le(i,e){return I(X(i),e,function t(s,o){if(Array.isArray(o))return Array.isArray(s)?I(X(s),o,t):I([],o,t);if(G(o))return G(s)?I(X(s),o,t):I({},o,t)})}const g=i=>typeof i=="string",M=()=>{let i,e;const t=new Promise((s,o)=>{i=s,e=o});return t.resolve=i,t.reject=e,t},ce=i=>i==null?"":""+i,Ve=(i,e,t)=>{i.forEach(s=>{e[s]&&(t[s]=e[s])})},He=/###/g,he=i=>i&&i.indexOf("###")>-1?i.replace(He,"."):i,pe=i=>!i||g(i),z=(i,e,t)=>{const s=g(e)?e.split("."):e;let o=0;for(;o<s.length-1;){if(pe(i))return{};const n=he(s[o]);!i[n]&&t&&(i[n]=new t),Object.prototype.hasOwnProperty.call(i,n)?i=i[n]:i={},++o}return pe(i)?{}:{obj:i,k:he(s[o])}},ge=(i,e,t)=>{const{obj:s,k:o}=z(i,e,Object);if(s!==void 0||e.length===1){s[o]=t;return}let n=e[e.length-1],a=e.slice(0,e.length-1),r=z(i,a,Object);for(;r.obj===void 0&&a.length;)n=`${a[a.length-1]}.${n}`,a=a.slice(0,a.length-1),r=z(i,a,Object),r?.obj&&typeof r.obj[`${r.k}.${n}`]<"u"&&(r.obj=void 0);r.obj[`${r.k}.${n}`]=t},Me=(i,e,t,s)=>{const{obj:o,k:n}=z(i,e,Object);o[n]=o[n]||[],o[n].push(t)},J=(i,e)=>{const{obj:t,k:s}=z(i,e);if(t&&Object.prototype.hasOwnProperty.call(t,s))return t[s]},ze=(i,e,t)=>{const s=J(i,t);return s!==void 0?s:J(e,t)},Re=(i,e,t)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in i?g(i[s])||i[s]instanceof String||g(e[s])||e[s]instanceof String?t&&(i[s]=e[s]):Re(i[s],e[s],t):i[s]=e[s]);return i},V=i=>i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Be={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Ke=i=>g(i)?i.replace(/[&<>"'\/]/g,e=>Be[e]):i;class Ue{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const _e=[" ",",","?","!",";"],We=new Ue(20),Ge=(i,e,t)=>{e=e||"",t=t||"";const s=_e.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(s.length===0)return!0;const o=We.getRegExp(`(${s.map(a=>a==="?"?"\\?":a).join("|")})`);let n=!o.test(i);if(!n){const a=i.indexOf(t);a>0&&!o.test(i.substring(0,a))&&(n=!0)}return n},ne=(i,e,t=".")=>{if(!i)return;if(i[e])return Object.prototype.hasOwnProperty.call(i,e)?i[e]:void 0;const s=e.split(t);let o=i;for(let n=0;n<s.length;){if(!o||typeof o!="object")return;let a,r="";for(let l=n;l<s.length;++l)if(l!==n&&(r+=t),r+=s[l],a=o[r],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<s.length-1)continue;n+=l-n+1;break}o=a}return o},K=i=>i?.replace("_","-"),Je={type:"logger",log(i){this.output("log",i)},warn(i){this.output("warn",i)},error(i){this.output("error",i)},output(i,e){console?.[i]?.apply?.(console,e)}};class q{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Je,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,o){return o&&!this.debug?null:(g(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new q(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new q(this.logger,e)}}var N=new q;class Q{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const o=this.observers[s].get(t)||0;this.observers[s].set(t,o+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,o])=>{for(let n=0;n<o;n++)s(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,o])=>{for(let n=0;n<o;n++)s.apply(s,[e,...t])})}}class de extends Q{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s,o={}){const n=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,a=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let r;e.indexOf(".")>-1?r=e.split("."):(r=[e,t],s&&(Array.isArray(s)?r.push(...s):g(s)&&n?r.push(...s.split(n)):r.push(s)));const l=J(this.data,r);return!l&&!t&&!s&&e.indexOf(".")>-1&&(e=r[0],t=r[1],s=r.slice(2).join(".")),l||!a||!g(s)?l:ne(this.data?.[e]?.[t],s,n)}addResource(e,t,s,o,n={silent:!1}){const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let r=[e,t];s&&(r=r.concat(a?s.split(a):s)),e.indexOf(".")>-1&&(r=e.split("."),o=t,t=r[1]),this.addNamespaces(t),ge(this.data,r,o),n.silent||this.emit("added",e,t,s,o)}addResources(e,t,s,o={silent:!1}){for(const n in s)(g(s[n])||Array.isArray(s[n]))&&this.addResource(e,t,n,s[n],{silent:!0});o.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,o,n,a={silent:!1,skipCopy:!1}){let r=[e,t];e.indexOf(".")>-1&&(r=e.split("."),o=s,s=t,t=r[1]),this.addNamespaces(t);let l=J(this.data,r)||{};a.skipCopy||(s=JSON.parse(JSON.stringify(s))),o?Re(l,s,n):l={...l,...s},ge(this.data,r,l),a.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var Pe={processors:{},addPostProcessor(i){this.processors[i.name]=i},handle(i,e,t,s,o){return i.forEach(n=>{e=this.processors[n]?.process(e,t,s,o)??e}),e}};const $e=Symbol("i18next/PATH_KEY");function qe(){const i=[],e=Object.create(null);let t;return e.get=(s,o)=>(t?.revoke?.(),o===$e?i:(i.push(o),t=Proxy.revocable(s,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function ie(i,e){const{[$e]:t}=i(qe());return t.join(e?.keySeparator??".")}const fe={},ee=i=>!g(i)&&typeof i!="boolean"&&typeof i!="number";class Y extends Q{constructor(e,t={}){super(),Ve(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=N.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const s={...t};if(e==null)return!1;const o=this.resolve(e,s);if(o?.res===void 0)return!1;const n=ee(o.res);return!(s.returnObjects===!1&&n)}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const o=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let n=t.ns||this.options.defaultNS||[];const a=s&&e.indexOf(s)>-1,r=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Ge(e,s,o);if(a&&!r){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:g(n)?[n]:n};const u=e.split(s);(s!==o||s===o&&this.options.ns.indexOf(u[0])>-1)&&(n=u.shift()),e=u.join(o)}return{key:e,namespaces:g(n)?[n]:n}}translate(e,t,s){let o=typeof t=="object"?{...t}:t;if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),e==null)return"";typeof e=="function"&&(e=ie(e,{...this.options,...o})),Array.isArray(e)||(e=[String(e)]);const n=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,a=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:r,namespaces:l}=this.extractFromKey(e[e.length-1],o),u=l[l.length-1];let c=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;c===void 0&&(c=":");const h=o.lng||this.language,p=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h?.toLowerCase()==="cimode")return p?n?{res:`${u}${c}${r}`,usedKey:r,exactUsedKey:r,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(o)}:`${u}${c}${r}`:n?{res:r,usedKey:r,exactUsedKey:r,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(o)}:r;const f=this.resolve(e,o);let d=f?.res;const v=f?.usedKey||r,b=f?.exactUsedKey||r,L=["[object Number]","[object Function]","[object RegExp]"],x=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,k=o.count!==void 0&&!g(o.count),$=Y.hasDefaultValue(o),R=k?this.pluralResolver.getSuffix(h,o.count,o):"",T=o.ordinal&&k?this.pluralResolver.getSuffix(h,o.count,{ordinal:!1}):"",re=k&&!o.ordinal&&o.count===0,D=re&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${R}`]||o[`defaultValue${T}`]||o.defaultValue;let C=d;E&&!d&&$&&(C=D);const Ce=ee(C),je=Object.prototype.toString.apply(C);if(E&&C&&Ce&&L.indexOf(je)<0&&!(g(x)&&Array.isArray(C))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const j=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,C,{...o,ns:l}):`key '${r} (${this.language})' returned an object instead of string.`;return n?(f.res=j,f.usedParams=this.getUsedParamsDetails(o),f):j}if(a){const j=Array.isArray(C),P=j?[]:{},Z=j?b:v;for(const O in C)if(Object.prototype.hasOwnProperty.call(C,O)){const F=`${Z}${a}${O}`;$&&!d?P[O]=this.translate(F,{...o,defaultValue:ee(D)?D[O]:void 0,joinArrays:!1,ns:l}):P[O]=this.translate(F,{...o,joinArrays:!1,ns:l}),P[O]===F&&(P[O]=C[O])}d=P}}else if(E&&g(x)&&Array.isArray(d))d=d.join(x),d&&(d=this.extendTranslation(d,e,o,s));else{let j=!1,P=!1;!this.isValidLookup(d)&&$&&(j=!0,d=D),this.isValidLookup(d)||(P=!0,d=r);const Z=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&P?void 0:d,O=$&&D!==d&&this.options.updateMissing;if(P||j||O){if(this.logger.log(O?"updateKey":"missingKey",h,u,r,O?D:d),a){const w=this.resolve(r,{...o,keySeparator:!1});w&&w.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let F=[];const _=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&_&&_[0])for(let w=0;w<_.length;w++)F.push(_[w]);else this.options.saveMissingTo==="all"?F=this.languageUtils.toResolveHierarchy(o.lng||this.language):F.push(o.lng||this.language);const le=(w,A,H)=>{const ue=$&&H!==d?H:Z;this.options.missingKeyHandler?this.options.missingKeyHandler(w,u,A,ue,O,o):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(w,u,A,ue,O,o),this.emit("missingKey",w,u,A,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?F.forEach(w=>{const A=this.pluralResolver.getSuffixes(w,o);re&&o[`defaultValue${this.options.pluralSeparator}zero`]&&A.indexOf(`${this.options.pluralSeparator}zero`)<0&&A.push(`${this.options.pluralSeparator}zero`),A.forEach(H=>{le([w],r+H,o[`defaultValue${H}`]||D)})}):le(F,r,D))}d=this.extendTranslation(d,e,o,f,s),P&&d===r&&this.options.appendNamespaceToMissingKey&&(d=`${u}${c}${r}`),(P||j)&&this.options.parseMissingKeyHandler&&(d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${c}${r}`:r,j?d:void 0,o))}return n?(f.res=d,f.usedParams=this.getUsedParamsDetails(o),f):d}extendTranslation(e,t,s,o,n){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const l=g(e)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(l){const h=e.match(this.interpolator.nestingRegexp);u=h&&h.length}let c=s.replace&&!g(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),e=this.interpolator.interpolate(e,c,s.lng||this.language||o.usedLng,s),l){const h=e.match(this.interpolator.nestingRegexp),p=h&&h.length;u<p&&(s.nest=!1)}!s.lng&&o&&o.res&&(s.lng=this.language||o.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...h)=>n?.[0]===h[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${t[0]}`),null):this.translate(...h,t),s)),s.interpolation&&this.interpolator.reset()}const a=s.postProcess||this.options.postProcess,r=g(a)?[a]:a;return e!=null&&r?.length&&s.applyPostProcessor!==!1&&(e=Pe.handle(r,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,t={}){let s,o,n,a,r;return g(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(s))return;const u=this.extractFromKey(l,t),c=u.key;o=c;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const p=t.count!==void 0&&!g(t.count),f=p&&!t.ordinal&&t.count===0,d=t.context!==void 0&&(g(t.context)||typeof t.context=="number")&&t.context!=="",v=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach(b=>{this.isValidLookup(s)||(r=b,!fe[`${v[0]}-${b}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(r)&&(fe[`${v[0]}-${b}`]=!0,this.logger.warn(`key "${o}" for languages "${v.join(", ")}" won't get resolved as namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(L=>{if(this.isValidLookup(s))return;a=L;const x=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(x,c,L,b,t);else{let k;p&&(k=this.pluralResolver.getSuffix(L,t.count,t));const $=`${this.options.pluralSeparator}zero`,R=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(t.ordinal&&k.indexOf(R)===0&&x.push(c+k.replace(R,this.options.pluralSeparator)),x.push(c+k),f&&x.push(c+$)),d){const T=`${c}${this.options.contextSeparator||"_"}${t.context}`;x.push(T),p&&(t.ordinal&&k.indexOf(R)===0&&x.push(T+k.replace(R,this.options.pluralSeparator)),x.push(T+k),f&&x.push(T+$))}}let E;for(;E=x.pop();)this.isValidLookup(s)||(n=E,s=this.getResource(L,b,E,t))}))})}),{res:s,usedKey:o,exactUsedKey:n,usedLng:a,usedNS:r}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s,o={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,s,o):this.resourceStore.getResource(e,t,s,o)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!g(e.replace);let o=s?e.replace:e;if(s&&typeof e.count<"u"&&(o.count=e.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!s){o={...o};for(const n of t)delete o[n]}return o}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}}class me{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=N.create("languageUtils")}getScriptPartFromCode(e){if(e=K(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=K(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(g(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;const o=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(o))&&(t=o)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;const o=this.getScriptPartFromCode(s);if(this.isSupportedCode(o))return t=o;const n=this.getLanguagePartFromCode(s);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(a=>{if(a===n||!(a.indexOf("-")<0&&n.indexOf("-")<0)&&(a.indexOf("-")>0&&n.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===n||a.indexOf(n)===0&&n.length>1))return a})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),g(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),o=[],n=a=>{a&&(this.isSupportedCode(a)?o.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return g(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&n(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&n(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&n(this.getLanguagePartFromCode(e))):g(e)&&n(this.formatLanguageCode(e)),s.forEach(a=>{o.indexOf(a)<0&&n(this.formatLanguageCode(a))}),o}}const ye={zero:0,one:1,two:2,few:3,many:4,other:5},ve={select:i=>i===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Ye{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=N.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const s=K(e==="dev"?"en":e),o=t.ordinal?"ordinal":"cardinal",n=JSON.stringify({cleanedCode:s,type:o});if(n in this.pluralRulesCache)return this.pluralRulesCache[n];let a;try{a=new Intl.PluralRules(s,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),ve;if(!e.match(/-|_/))return ve;const r=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(r,t)}return this.pluralRulesCache[n]=a,a}needsPlural(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,s={}){return this.getSuffixes(e,s).map(o=>`${t}${o}`)}getSuffixes(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?s.resolvedOptions().pluralCategories.sort((o,n)=>ye[o]-ye[n]).map(o=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(e,t,s={}){const o=this.getRule(e,s);return o?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${o.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,s))}}const xe=(i,e,t,s=".",o=!0)=>{let n=ze(i,e,t);return!n&&o&&g(t)&&(n=ne(i,t,s),n===void 0&&(n=ne(e,t,s))),n},te=i=>i.replace(/\$/g,"$$$$");class be{constructor(e={}){this.logger=N.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:o,prefix:n,prefixEscaped:a,suffix:r,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:p,nestingPrefixEscaped:f,nestingSuffix:d,nestingSuffixEscaped:v,nestingOptionsSeparator:b,maxReplaces:L,alwaysFormat:x}=e.interpolation;this.escape=t!==void 0?t:Ke,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=n?V(n):a||"{{",this.suffix=r?V(r):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=p?V(p):f||V("$t("),this.nestingSuffix=d?V(d):v||V(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=L||1e3,this.alwaysFormat=x!==void 0?x:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,s)=>t?.source===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,s,o){let n,a,r;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=p=>{if(p.indexOf(this.formatSeparator)<0){const b=xe(t,l,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,s,{...o,...t,interpolationkey:p}):b}const f=p.split(this.formatSeparator),d=f.shift().trim(),v=f.join(this.formatSeparator).trim();return this.format(xe(t,l,d,this.options.keySeparator,this.options.ignoreJSONStructure),v,s,{...o,...t,interpolationkey:d})};this.resetRegExp();const c=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>te(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?te(this.escape(p)):te(p)}].forEach(p=>{for(r=0;n=p.regex.exec(e);){const f=n[1].trim();if(a=u(f),a===void 0)if(typeof c=="function"){const v=c(e,n,o);a=g(v)?v:""}else if(o&&Object.prototype.hasOwnProperty.call(o,f))a="";else if(h){a=n[0];continue}else this.logger.warn(`missed to pass in variable ${f} for interpolating ${e}`),a="";else!g(a)&&!this.useRawValueToEscape&&(a=ce(a));const d=p.safeValue(a);if(e=e.replace(n[0],d),h?(p.regex.lastIndex+=a.length,p.regex.lastIndex-=n[0].length):p.regex.lastIndex=0,r++,r>=this.maxReplaces)break}}),e}nest(e,t,s={}){let o,n,a;const r=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const h=l.split(new RegExp(`${c}[ ]*{`));let p=`{${h[1]}`;l=h[0],p=this.interpolate(p,a);const f=p.match(/'/g),d=p.match(/"/g);((f?.length??0)%2===0&&!d||d.length%2!==0)&&(p=p.replace(/'/g,'"'));try{a=JSON.parse(p),u&&(a={...u,...a})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,v),`${l}${c}${p}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;o=this.nestingRegexp.exec(e);){let l=[];a={...s},a=a.replace&&!g(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const u=/{.*}/.test(o[1])?o[1].lastIndexOf("}")+1:o[1].indexOf(this.formatSeparator);if(u!==-1&&(l=o[1].slice(u).split(this.formatSeparator).map(c=>c.trim()).filter(Boolean),o[1]=o[1].slice(0,u)),n=t(r.call(this,o[1].trim(),a),a),n&&o[0]===e&&!g(n))return n;g(n)||(n=ce(n)),n||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${e}`),n=""),l.length&&(n=l.reduce((c,h)=>this.format(c,h,s.lng,{...s,interpolationkey:o[1].trim()}),n.trim())),e=e.replace(o[0],n),this.regexp.lastIndex=0}return e}}const Qe=i=>{let e=i.toLowerCase().trim();const t={};if(i.indexOf("(")>-1){const s=i.split("(");e=s[0].toLowerCase().trim();const o=s[1].substring(0,s[1].length-1);e==="currency"&&o.indexOf(":")<0?t.currency||(t.currency=o.trim()):e==="relativetime"&&o.indexOf(":")<0?t.range||(t.range=o.trim()):o.split(";").forEach(n=>{if(n){const[a,...r]=n.split(":"),l=r.join(":").trim().replace(/^'+|'+$/g,""),u=a.trim();t[u]||(t[u]=l),l==="false"&&(t[u]=!1),l==="true"&&(t[u]=!0),isNaN(l)||(t[u]=parseInt(l,10))}})}return{formatName:e,formatOptions:t}},Se=i=>{const e={};return(t,s,o)=>{let n=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(n={...n,[o.interpolationkey]:void 0});const a=s+JSON.stringify(n);let r=e[a];return r||(r=i(K(s),o),e[a]=r),r(t)}},Ze=i=>(e,t,s)=>i(K(t),s)(e);class Xe{constructor(e={}){this.logger=N.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const s=t.cacheInBuiltFormats?Se:Ze;this.formats={number:s((o,n)=>{const a=new Intl.NumberFormat(o,{...n});return r=>a.format(r)}),currency:s((o,n)=>{const a=new Intl.NumberFormat(o,{...n,style:"currency"});return r=>a.format(r)}),datetime:s((o,n)=>{const a=new Intl.DateTimeFormat(o,{...n});return r=>a.format(r)}),relativetime:s((o,n)=>{const a=new Intl.RelativeTimeFormat(o,{...n});return r=>a.format(r,n.range||"day")}),list:s((o,n)=>{const a=new Intl.ListFormat(o,{...n});return r=>a.format(r)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Se(t)}format(e,t,s,o={}){const n=t.split(this.formatSeparator);if(n.length>1&&n[0].indexOf("(")>1&&n[0].indexOf(")")<0&&n.find(a=>a.indexOf(")")>-1)){const a=n.findIndex(r=>r.indexOf(")")>-1);n[0]=[n[0],...n.splice(1,a)].join(this.formatSeparator)}return n.reduce((a,r)=>{const{formatName:l,formatOptions:u}=Qe(r);if(this.formats[l]){let c=a;try{const h=o?.formatParams?.[o.interpolationkey]||{},p=h.locale||h.lng||o.locale||o.lng||s;c=this.formats[l](a,p,{...u,...o,...h})}catch(h){this.logger.warn(h)}return c}else this.logger.warn(`there was no format function for ${l}`);return a},e)}}const et=(i,e)=>{i.pending[e]!==void 0&&(delete i.pending[e],i.pendingCount--)};class tt extends Q{constructor(e,t,s,o={}){super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=o,this.logger=N.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,o.backend,o)}queueLoad(e,t,s,o){const n={},a={},r={},l={};return e.forEach(u=>{let c=!0;t.forEach(h=>{const p=`${u}|${h}`;!s.reload&&this.store.hasResourceBundle(u,h)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?a[p]===void 0&&(a[p]=!0):(this.state[p]=1,c=!1,a[p]===void 0&&(a[p]=!0),n[p]===void 0&&(n[p]=!0),l[h]===void 0&&(l[h]=!0)))}),c||(r[u]=!0)}),(Object.keys(n).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(n),pending:Object.keys(a),toLoadLanguages:Object.keys(r),toLoadNamespaces:Object.keys(l)}}loaded(e,t,s){const o=e.split("|"),n=o[0],a=o[1];t&&this.emit("failedLoading",n,a,t),!t&&s&&this.store.addResourceBundle(n,a,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const r={};this.queue.forEach(l=>{Me(l.loaded,[n],a),et(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{r[u]||(r[u]={});const c=l.loaded[u];c.length&&c.forEach(h=>{r[u][h]===void 0&&(r[u][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",r),this.queue=this.queue.filter(l=>!l.done)}read(e,t,s,o=0,n=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:o,wait:n,callback:a});return}this.readingCalls++;const r=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&c&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,o+1,n*2,a)},n);return}a(u,c)},l=this.backend[s].bind(this.backend);if(l.length===2){try{const u=l(e,t);u&&typeof u.then=="function"?u.then(c=>r(null,c)).catch(r):r(null,u)}catch(u){r(u)}return}return l(e,t,r)}prepareLoading(e,t,s={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();g(e)&&(e=this.languageUtils.toResolveHierarchy(e)),g(t)&&(t=[t]);const n=this.queueLoad(e,t,s,o);if(!n.toLoad.length)return n.pending.length||o(),null;n.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e,t=""){const s=e.split("|"),o=s[0],n=s[1];this.read(o,n,"read",void 0,void 0,(a,r)=>{a&&this.logger.warn(`${t}loading namespace ${n} for language ${o} failed`,a),!a&&r&&this.logger.log(`${t}loaded namespace ${n} for language ${o}`,r),this.loaded(e,a,r)})}saveMissing(e,t,s,o,n,a={},r=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const l={...a,isUpdate:n},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(e,t,s,o,l):c=u(e,t,s,o),c&&typeof c.then=="function"?c.then(h=>r(null,h)).catch(r):r(null,c)}catch(c){r(c)}else u(e,t,s,o,r,l)}!e||!e[0]||this.store.addResource(e[0],t,s,o)}}}const se=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:i=>{let e={};if(typeof i[1]=="object"&&(e=i[1]),g(i[1])&&(e.defaultValue=i[1]),g(i[2])&&(e.tDescription=i[2]),typeof i[2]=="object"||typeof i[3]=="object"){const t=i[3]||i[2];Object.keys(t).forEach(s=>{e[s]=t[s]})}return e},interpolation:{escapeValue:!0,format:i=>i,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),ke=i=>(g(i.ns)&&(i.ns=[i.ns]),g(i.fallbackLng)&&(i.fallbackLng=[i.fallbackLng]),g(i.fallbackNS)&&(i.fallbackNS=[i.fallbackNS]),i.supportedLngs?.indexOf?.("cimode")<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),typeof i.initImmediate=="boolean"&&(i.initAsync=i.initImmediate),i),W=()=>{},st=i=>{Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(e=>{typeof i[e]=="function"&&(i[e]=i[e].bind(i))})};class B extends Q{constructor(e={},t){if(super(),this.options=ke(e),this.services={},this.logger=N,this.modules={external:[]},st(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(g(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=se();this.options={...s,...this.options,...ke(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=s.overloadTranslationOptionHandler);const o=r=>r?typeof r=="function"?new r:r:null;if(!this.options.isClone){this.modules.logger?N.init(o(this.modules.logger),this.options):N.init(null,this.options);let r;this.modules.formatter?r=this.modules.formatter:r=Xe;const l=new me(this.options);this.store=new de(this.options.resources,this.options);const u=this.services;u.logger=N,u.resourceStore=this.store,u.languageUtils=l,u.pluralResolver=new Ye(l,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),r&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(u.formatter=o(r),u.formatter.init&&u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new be(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new tt(o(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",(c,...h)=>{this.emit(c,...h)}),this.modules.languageDetector&&(u.languageDetector=o(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=o(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new Y(this.services,this.options),this.translator.on("*",(c,...h)=>{this.emit(c,...h)}),this.modules.external.forEach(c=>{c.init&&c.init(this)})}if(this.format=this.options.interpolation.format,t||(t=W),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const r=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);r.length>0&&r[0]!=="dev"&&(this.options.lng=r[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(r=>{this[r]=(...l)=>this.store[r](...l)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(r=>{this[r]=(...l)=>(this.store[r](...l),this)});const n=M(),a=()=>{const r=(l,u)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),n.resolve(u),t(l,u)};if(this.languages&&!this.isInitialized)return r(null,this.t.bind(this));this.changeLanguage(this.options.lng,r)};return this.options.resources||!this.options.initAsync?a():setTimeout(a,0),n}loadResources(e,t=W){let s=t;const o=g(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const n=[],a=r=>{!r||r==="cimode"||this.services.languageUtils.toResolveHierarchy(r).forEach(l=>{l!=="cimode"&&n.indexOf(l)<0&&n.push(l)})};o?a(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(r=>a(r)),this.options.preload?.forEach?.(r=>a(r)),this.services.backendConnector.load(n,this.options.ns,r=>{!r&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(r)})}else s(null)}reloadResources(e,t,s){const o=M();return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=W),this.services.backendConnector.reload(e,t,n=>{o.resolve(),s(n)}),o}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Pe.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const s=M();this.emit("languageChanging",e);const o=r=>{this.language=r,this.languages=this.services.languageUtils.toResolveHierarchy(r),this.resolvedLanguage=void 0,this.setResolvedLanguage(r)},n=(r,l)=>{l?this.isLanguageChangingTo===e&&(o(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,s.resolve((...u)=>this.t(...u)),t&&t(r,(...u)=>this.t(...u))},a=r=>{!e&&!r&&this.services.languageDetector&&(r=[]);const l=g(r)?r:r&&r[0],u=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(g(r)?[r]:r);u&&(this.language||o(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector?.cacheUserLanguage?.(u)),this.loadResources(u,c=>{n(c,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,t,s){const o=(n,a,...r)=>{let l;typeof a!="object"?l=this.options.overloadTranslationOptionHandler([n,a].concat(r)):l={...a},l.lng=l.lng||o.lng,l.lngs=l.lngs||o.lngs,l.ns=l.ns||o.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||s||o.keyPrefix);const u=this.options.keySeparator||".";let c;return l.keyPrefix&&Array.isArray(n)?c=n.map(h=>(typeof h=="function"&&(h=ie(h,{...this.options,...a})),`${l.keyPrefix}${u}${h}`)):(typeof n=="function"&&(n=ie(n,{...this.options,...a})),c=l.keyPrefix?`${l.keyPrefix}${u}${n}`:n),this.t(c,l)};return g(e)?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=s,o}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,n=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const a=(r,l)=>{const u=this.services.backendConnector.state[`${r}|${l}`];return u===-1||u===0||u===2};if(t.precheck){const r=t.precheck(this,a);if(r!==void 0)return r}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(s,e)&&(!o||a(n,e)))}loadNamespaces(e,t){const s=M();return this.options.ns?(g(e)&&(e=[e]),e.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{s.resolve(),t&&t(o)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=M();g(e)&&(e=[e]);const o=this.options.preload||[],n=e.filter(a=>o.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return n.length?(this.options.preload=o.concat(n),this.loadResources(a=>{s.resolve(),t&&t(a)}),s):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const o=new Intl.Locale(e);if(o&&o.getTextInfo){const n=o.getTextInfo();if(n&&n.direction)return n.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new me(se());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const s=new B(e,t);return s.createInstance=B.createInstance,s}cloneInstance(e={},t=W){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const o={...this.options,...e,isClone:!0},n=new B(o);if((e.debug!==void 0||e.prefix!==void 0)&&(n.logger=n.logger.clone(e)),["store","services","language"].forEach(a=>{n[a]=this[a]}),n.services={...this.services},n.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},s){const a=Object.keys(this.store.data).reduce((r,l)=>(r[l]={...this.store.data[l]},r[l]=Object.keys(r[l]).reduce((u,c)=>(u[c]={...r[l][c]},u),r[l]),r),{});n.store=new de(a,o),n.services.resourceStore=n.store}if(e.interpolation){const a={...se().interpolation,...this.options.interpolation,...e.interpolation},r={...o,interpolation:a};n.services.interpolator=new be(r)}return n.translator=new Y(n.services,o),n.translator.on("*",(a,...r)=>{n.emit(a,...r)}),n.init(o,t),n.translator.options=o,n.translator.backendConnector.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},n}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const S=B.createInstance();S.createInstance;S.dir;S.init;S.loadResources;S.reloadResources;S.use;S.changeLanguage;S.getFixedT;const ct=S.t;S.exists;S.setDefaultNamespace;S.hasLoadedNamespace;S.loadNamespaces;S.loadLanguages;function ot(i,e){const{fetch:t}=window;window.fetch=(s,o)=>{let n=o;const a=e();if(Object.keys(a).length>0&&typeof s=="string"&&s.match(i)){const r=new Headers(o?.headers);a.entries().forEach(([l,u])=>{r.append(l,u)}),n={...o,headers:r}}return t(s,n)}}const Oe=480,we=768,nt={epsg:"EPSG:25832",options:[{resolution:66.14579761460263,scale:25e4,zoomLevel:0},{resolution:26.458319045841044,scale:1e5,zoomLevel:1},{resolution:15.874991427504629,scale:6e4,zoomLevel:2},{resolution:10.583327618336419,scale:4e4,zoomLevel:3},{resolution:5.2916638091682096,scale:2e4,zoomLevel:4},{resolution:2.6458319045841048,scale:1e4,zoomLevel:5},{resolution:1.3229159522920524,scale:5e3,zoomLevel:6},{resolution:.6614579761460262,scale:2500,zoomLevel:7},{resolution:.2645831904584105,scale:1e3,zoomLevel:8},{resolution:.1322915952292052,scale:500,zoomLevel:9}],namedProjections:[["EPSG:25832","+proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"],["EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"],["EPSG:31467","+proj=tmerc +lat_0=0 +lon_0=9 +k=1 +x_0=3500000 +y_0=0 +ellps=bessel +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.70 +units=m +no_defs"],["EPSG:4647","+proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=32500000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"]],startResolution:15.874991427504629},ae=U("main",()=>{const i=y("system"),e=y(Le({layers:[],startCenter:[0,0]},nt)),t=y(""),s=y(null),o=Ee({}),n=y([]),a=y(null),r=y(0),l=m(()=>e.value.layout??"standard"),u=y(0),c=y(0),h=m(()=>u.value<=Oe),p=m(()=>c.value<=we),f=m(()=>window.innerHeight===u.value&&window.innerWidth===c.value),d=m(()=>h.value&&f.value),v=y(!1);function b(){v.value=window.innerHeight<=Oe||window.innerWidth<=we}const L=y("");Fe(()=>e.value.secureServiceUrlRegex,R=>{R&&ot(R,()=>new Headers([["Authorization",`Bearer ${L.value}`]]))});const x=y([0,0]);function E(R){x.value=R.getGeometry().getCoordinates()}function k(){addEventListener("resize",b),b()}function $(){removeEventListener("resize",b)}return{colorScheme:i,configuration:e,clientHeight:u,clientWidth:c,hasSmallDisplay:v,language:t,lightElement:s,map:o,oidcToken:L,serviceRegister:n,shadowRoot:a,center:x,zoom:r,layout:l,hasSmallHeight:h,hasSmallWidth:p,hasWindowSize:f,deviceIsHorizontal:d,centerOnFeature:E,updateHasSmallDisplay:b,setup:k,teardown:$}}),it=U("marker",()=>{const i=ae(),e=m(()=>i.configuration.markers),t=m(()=>typeof e.value?.callOnMapSelect=="function"?e.value.callOnMapSelect:null),s=m(()=>e.value?.clusterClickZoom||!1),o=y(null),n=y(null),a=m(()=>n.value===null?null:n.value.getGeometry().getCoordinates());return{configuration:e,callOnMapSelect:t,clusterClickZoom:s,hovered:o,selected:n,selectedCoordinates:a}}),at=U("moveHandle",()=>{const i=y(null),e=y(()=>{}),t=y("kern-icon--close"),s=y(""),o=y(null),n=y(!1),a=y(""),r=y(null);function l(h){if(h===null){e.value(!1),c();return}a.value!==h.plugin&&e.value(!1),n.value=!0,e.value=h.closeFunction,s.value=h.closeLabel,o.value=oe(h.component),a.value=h.plugin,h.closeIcon&&(t.value=h.closeIcon)}function u(h){i.value=h===null?null:oe(h)}function c(){i.value=null,e.value=()=>{},t.value="kern-icon--close",s.value="",o.value=null,n.value=!1,a.value=""}return{actionButton:i,closeFunction:e,closeIcon:t,closeLabel:s,component:o,isActive:n,plugin:a,top:r,$reset:c,setMoveHandle:l,setMoveHandleActionButton:u}}),rt=U("plugin",()=>{const i=Ie([]),e=ae();function t(n){const{id:a,locales:r,options:l,storeModule:u}=n,c=Le(l||{},e.configuration[a]||{});e.configuration[a]=c;const h=u?.(e._instance);h&&typeof h.setupPlugin=="function"&&h.setupPlugin(),r&&r.forEach(p=>{S.addResourceBundle(p.type,a,p.resources,!0)}),i.push({...n,options:c,...n.component?{component:oe(n.component)}:{}})}function s(n){const a=i.findIndex(({id:u})=>u===n),r=i[a];if(!r){console.error(`@polar/polar(core/stores/plugin:55:4)
`,`Plugin "${n}" not found.`);return}const l=r.storeModule?.(e._instance);l&&(typeof l.teardownPlugin=="function"&&l.teardownPlugin(),l.$reset()),i.splice(a,1)}function o(n){return i.find(a=>a.id===n)?.storeModule?.(e._instance)||null}return{plugins:i,addPlugin:t,removePlugin:s,getPluginStore:o}}),ht=U("core",()=>{const i=ae(),e=Ne(i),t=at(),s=rt(),o=it();return{colorScheme:e.colorScheme,clientHeight:m(()=>i.clientHeight),configuration:m(()=>i.configuration),deviceIsHorizontal:m(()=>i.deviceIsHorizontal),hasSmallDisplay:m(()=>i.hasSmallDisplay),hasSmallHeight:m(()=>i.hasSmallHeight),hasSmallWidth:m(()=>i.hasSmallWidth),hasWindowSize:m(()=>i.hasWindowSize),language:e.language,addPlugin:s.addPlugin,removePlugin:s.removePlugin,getPluginStore:s.getPluginStore,oidcToken:i.oidcToken,lightElement:m(()=>i.lightElement),layout:m(()=>i.layout),map:m(()=>i.map),moveHandleTop:m(()=>t.top),selectedCoordinates:m(()=>o.selectedCoordinates),shadowRoot:m(()=>i.shadowRoot),setMoveHandle:t.setMoveHandle,setMoveHandleActionButton:t.setMoveHandleActionButton}});export{Le as R,at as a,it as b,ct as f,ht as h,rt as l,ae as o,S as v};
