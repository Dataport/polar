import{a5 as P,a6 as je,a7 as he,a8 as ot,a9 as be,aa as J,ab as Ie,ac as Me,ad as st,ae as lt,af as ct,ag as dt,ah as ut,ai as Ge,aj as Re,ak as Ce,al as pt,am as Ne,F as se,I as le,J as ce,L as q,a2 as gt,an as ft,ao as mt,ap as N,aq as ht,R as de,H as vt,ar as Be,Z as De,X as ze,U as yt,V as bt,W as kt,S as xt,Y as wt,T as It}from"./runtime-core.esm-bundler-Dlqq4rkE.js";import{ref as $,markRaw as Le,defineComponent as z,createElementBlock as g,openBlock as d,createElementVNode as m,Fragment as _,renderList as R,unref as p,createBlock as D,resolveDynamicComponent as ke,computed as y,normalizeClass as ue,watch as A,onScopeDispose as ne,nextTick as Ct,createCommentVNode as j,withCtx as We,normalizeProps as St,mergeProps as _t,toDisplayString as F,createVNode as xe,createTextVNode as re,mergeModels as Ft,useModel as Lt}from"./vue.runtime.esm-bundler-IOlVeADE-DvDdZCyY.js";import{defineStore as W,storeToRefs as G}from"./pinia-6B_mW3wX-DRmF_KiC.js";import{T as M,F as te,d as V,S as Z,k as ie,h as pe,a as oe,C as ve,m as Et,b as $t,v as Tt,J as ge,c as Se,e as X,f as Pt,g as At,D as Ot,I as jt,N as Mt,s as Gt,O as Rt,A as Nt,X as Bt,G as Dt,Q as Ee}from"./index-DRjq7FjL-BW4PYlfu.js";import"./reverseGeocode-CR3Bbmu1-Cvr90uaQ.js";import"./indicateLoading-CVZ5Vbg5-BhN1x2_f.js";const He=W("plugins/footer",()=>{const t=M(),e=$([]),a=$([]);function r(){e.value=(t.configuration.footer?.leftEntries||[]).filter(({id:i})=>{const s=t.configuration[i]?.displayComponent;return typeof s=="boolean"?s:!0}),a.value=(t.configuration.footer?.rightEntries||[]).filter(({id:i})=>{const s=t.configuration[i]?.displayComponent;return typeof s=="boolean"?s:!0}),e.value.concat(a.value).forEach(i=>{t.addPlugin(te(i,{independent:!1}))}),e.value.map(i=>te(i,{component:Le(i.component)})),a.value.map(i=>te(i,{component:Le(i.component)}))}function n(){}return{leftEntries:e,rightEntries:a,setupPlugin:r,teardownPlugin:n}}),zt={class:"polar-plugin-footer-wrapper"},Wt=z({__name:"PolarFooter.ce",setup(t){const{leftEntries:e,rightEntries:a}=G(He());return(r,n)=>(d(),g("div",zt,[m("ul",null,[(d(!0),g(_,null,R(p(e),(i,s)=>(d(),g("li",{key:s},[(d(),D(ke(i.component)))]))),128))]),m("ul",null,[(d(!0),g(_,null,R(p(a),(i,s)=>(d(),g("li",{key:s},[(d(),D(ke(i.component)))]))),128))])]))}}),Ht=".polar-plugin-footer-wrapper{&[data-v-9004f27e]{position:absolute;bottom:0;display:flex;width:100%;height:var(--kern-metric-dimension-large);padding:var(--kern-metric-space-x-small) var(--kern-metric-space-x-small) var(--kern-metric-space-x-small) var(--kern-metric-space-small);justify-content:space-between;align-items:center;flex-shrink:0;background:var(--kern-color-layout-background-hued);box-shadow:0 1px 1px #35395629,0 1px 2px #35395640,0 1px 6px #6e759740;border-radius:0 0 var(--kern-metric-border-radius-large) var(--kern-metric-border-radius-large)}ul{&[data-v-9004f27e]{display:flex;align-items:center;gap:var(--kern-metric-space-small);padding:0}li[data-v-9004f27e]{list-style:none}}}",Jt=P(Wt,[["styles",[Ht]],["__scopeId","data-v-9004f27e"]]),Ut={},Vt={},Kt=[{type:"de",resources:Ut},{type:"en",resources:Vt}],Yt="footer";function qt(t){return{id:Yt,component:Jt,locales:Kt,storeModule:He,options:t}}function we(){}const Qt=(t,e)=>()=>t.innerHTML=e.map(([a,r,n={}])=>`<${a}>${V.t(r,n)}</${a}>`).join(""),Xt=`
	background: rgba(255, 255, 255, 0.8);
	padding: 0.2em 0.5em;
	border-radius: 4px;
	color: #16161d;
	box-shadow: 0px 0px 3px 2px rgba(0, 0, 0, 0.5);
`;function Je(t,e=Xt){const a=document.createElement("div");a.style.cssText=e;const r=Qt(a,t);return V.on("languageChanged",r),V.store.on("added",r),r(),{element:a,unregister:()=>{V.off("languageChanges",r),V.store.off("added",r)}}}const I={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},Zt={ERROR:"error"};let ea=class extends Nt{constructor(e){super(Zt.ERROR),this.code=e.code,this.message=e.message}},ta=class extends At{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=Ot,this.watchId_=void 0,this.addChangeListener(I.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(I.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=jt(oe("EPSG:4326"),e),this.position_&&this.set(I.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const a=e.coords;this.set(I.ACCURACY,a.accuracy),this.set(I.ALTITUDE,a.altitude===null?void 0:a.altitude),this.set(I.ALTITUDE_ACCURACY,a.altitudeAccuracy===null?void 0:a.altitudeAccuracy),this.set(I.HEADING,a.heading===null?void 0:Mt(a.heading)),this.position_?(this.position_[0]=a.longitude,this.position_[1]=a.latitude):this.position_=[a.longitude,a.latitude];const r=this.transform_(this.position_);this.set(I.POSITION,r.slice()),this.set(I.SPEED,a.speed===null?void 0:a.speed);const n=Gt(this.position_,a.accuracy);n.applyTransform(this.transform_),this.set(I.ACCURACY_GEOMETRY,n),this.changed()}positionError_(e){this.dispatchEvent(new ea(e))}getAccuracy(){return this.get(I.ACCURACY)}getAccuracyGeometry(){return this.get(I.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(I.ALTITUDE)}getAltitudeAccuracy(){return this.get(I.ALTITUDE_ACCURACY)}getHeading(){return this.get(I.HEADING)}getPosition(){return this.get(I.POSITION)}getProjection(){return this.get(I.PROJECTION)}getSpeed(){return this.get(I.SPEED)}getTracking(){return this.get(I.TRACKING)}getTrackingOptions(){return this.get(I.TRACKING_OPTIONS)}setProjection(e){this.set(I.PROJECTION,oe(e))}setTracking(e){this.set(I.TRACKING,e)}setTrackingOptions(e){this.set(I.TRACKING_OPTIONS,e)}};function aa(){return navigator.permissions.query({name:"geolocation"}).then(({state:t})=>t==="denied").catch(()=>!1)}function na(t,e){const a=e/2*Math.sqrt(3),r=document.createElement("canvas").getContext("2d").createLinearGradient(0,-a,Math.sin(t),a+Math.cos(t));return r.addColorStop(0,"#0794FAFF"),r.addColorStop(2/3,"#0794FA00"),r}function ra(t){if(typeof t.get("heading")>"u")return new X;const e=42,a=Math.PI-t.get("heading");return new X({image:new Rt({points:3,radius:e,rotation:a,fill:new ge({color:na(a,e)}),displacement:[0,-30]})})}function ia(){const t=new ge({color:"#0078D4"}),e=new Se({color:"#FFFFFF",width:2});return a=>[ra(a),new X({image:new Pt({fill:t,stroke:e,radius:12}),fill:t,stroke:e})]}const oa=(t,e)=>t[0]!==e[0]||t[1]!==e[1],Ue=W("plugins/geoLocation",()=>{const t=M(),e=$(!1),a=$(null),r=$(null),n=$([]),i=y(()=>te({showTooltip:!1,zoomLevel:7},t.configuration.geoLocation||{})),s=y(()=>i.value.boundary),l=y(()=>e.value?"DISABLED":a.value===null?"LOCATABLE":"LOCATED"),o=new Z({type:"point",name:"geoLocationMarker"}),c=new ie({source:new pe({features:[o]}),properties:{name:"geoLocationMarkerLayer"},zIndex:1/0,style:ia()});function b(){t.map.addLayer(c),i.value.checkLocationInitially?u():aa().then(S=>e.value=S),v()}function h(){t.map.removeLayer(c),k(),B(),x()}let x=we;function v(){if(i.value.showTooltip){const{unregister:S,element:O}=Je([["h2","markerText",{ns:"geoLocation"}]]),T=new je({element:O,positioning:"bottom-center",offset:[0,-5]});t.map.addOverlay(T);const H=({pixel:U,dragging:nt})=>{if(nt)return;const rt=t.map.getFeaturesAtPixel(U,{layerFilter:it=>it.get("name")==="geoLocationMarkerLayer"}).length?t.map.getCoordinateFromPixel(U):void 0;T.setPosition(rt)};t.map.on("pointermove",H),x=()=>{S(),t.map.removeOverlay(T),t.map.un("pointermove",H),x=we}}}function w(){(l.value==="LOCATABLE"?u:k)()}function u(){if(e.value){f({message:"Geolocation API usage was denied by user or configuration."});return}a.value===null?a.value=new ta({trackingOptions:{enableHighAccuracy:!0},tracking:!0,projection:oe("EPSG:4326")}):E(),a.value.on("change:position",E),a.value.on("change:heading",({target:S})=>{o.set("heading",S.getHeading())}),a.value.on("error",f)}function f(S){he("error",ve(O=>O.button.locationAccessDenied,{ns:"geoLocation"})),console.error(`@polar/polar(plugins/geoLocation/store:176:3)
`,S.message),e.value=!0,B()}function k(){a.value?.setTracking(!1),B(),a.value=null}async function E(){const S=Et(a.value?.getPosition(),oe("EPSG:4326"),t.configuration.epsg),O=t.configuration.extent?$t(t.configuration.extent,S):!0,T=await ot(t.map,s.value?.layerId,S),H=r.value!==T;r.value=T;const U=typeof T=="symbol"&&s.value?.onError==="strict";if(!O||U){ee(U),k();return}oa(n.value,S)&&(C(S),H&&!T&&ee(!1))}function C(S){n.value=S;const O=!!o.getGeometry();o.setGeometry(new Tt(S)),(i.value.keepCentered||!O)&&r.value&&(t.map.getView().setCenter(S),t.map.getView().setZoom(i.value.zoomLevel))}function B(){o.setGeometry(void 0),n.value=[]}function ee(S){if(S){const T=ve(H=>H.toast.boundaryError,{ns:"geoLocation"});he("error",T),console.error(`@polar/polar(plugins/geoLocation/store:264:4)
`,T);return}const O=ve(T=>T.toast.notInBoundary,{ns:"geoLocation"});he("info",O,{timeout:1e4}),console.info(`@polar/polar(plugins/geoLocation/store:272:3)
`,O)}return{setupPlugin:b,teardownPlugin:h,locate:w,configuration:i,isGeolocationDenied:e,state:l,position:n,boundaryCheck:r}}),Ve="geoLocation",sa=z({__name:"GeoLocation.ce",setup(t){const{layout:e}=G(M()),a=Ue(),{state:r}=G(a),n=y(()=>r.value==="LOCATED"?"kern-icon-fill--near-me":r.value==="LOCATABLE"?"kern-icon--near-me":"kern-icon--near-me-disabled"),i=y(()=>a.configuration.renderType==="iconMenu"?void 0:e.value==="standard"||a.configuration.layoutTag?.includes("RIGHT")?"left":"right");return(s,l)=>(d(),D(be,{class:ue(p(e)==="nineRegions"?"polar-plugin-geoLocation-nineRegions":""),hint:s.$t(o=>o.button.tooltip,{ns:p(Ve)}),icon:n.value,"tooltip-position":i.value,disabled:p(r)==="DISABLED",onClick:p(a).locate},null,8,["class","hint","icon","tooltip-position","disabled","onClick"]))}}),la=".polar-plugin-geoLocation-nineRegions[data-v-45fc3e3e]{margin:var(--kern-metric-space-small)}",ca=P(sa,[["styles",[la]],["__scopeId","data-v-45fc3e3e"]]),da={markerText:"Aktuelle Position",button:{locationAccessDenied:"Standortzugriff nutzerseitig abgelehnt",tooltip:"Eigene Position markieren"},toast:{boundaryError:"Die Überprüfung Ihrer Position ist fehlgeschlagen. Bitte versuchen Sie es später erneut oder wenden Sie sich an einen Administrator, wenn das Problem bestehen bleibt.",notInBoundary:"Sie befinden sich nicht im Kartengebiet."}},ua={markerText:"Current location",button:{locationAccessDenied:"Location access denied by user",tooltip:"Mark own location"},toast:{boundaryError:"Validating your position failed. Please try later again or contact an administrator if the issue persists.",notInBoundary:"You are not within the map's boundaries."}},pa=[{type:"de",resources:da},{type:"en",resources:ua}];function ga(t){return{id:Ve,component:ca,locales:pa,storeModule:Ue,options:t}}function $e(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Te(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const fa="[object RegExp]",ma="[object String]",ha="[object Number]",va="[object Boolean]",Pe="[object Arguments]",ya="[object Symbol]",ba="[object Date]",ka="[object Map]",xa="[object Set]",wa="[object Array]",Ia="[object Function]",Ca="[object ArrayBuffer]",ye="[object Object]",Sa="[object Error]",_a="[object DataView]",Fa="[object Uint8Array]",La="[object Uint8ClampedArray]",Ea="[object Uint16Array]",$a="[object Uint32Array]",Ta="[object BigUint64Array]",Pa="[object Int8Array]",Aa="[object Int16Array]",Oa="[object Int32Array]",ja="[object BigInt64Array]",Ma="[object Float32Array]",Ga="[object Float64Array]";function Ra(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Na(t,e,a){return K(t,e,void 0,void 0,void 0,void 0,a)}function K(t,e,a,r,n,i,s){const l=s(t,e,a,r,n,i);if(l!==void 0)return l;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Q(t,e,i,s)}return Q(t,e,i,s)}function Q(t,e,a,r){if(Object.is(t,e))return!0;let n=Te(t),i=Te(e);if(n===Pe&&(n=ye),i===Pe&&(i=ye),n!==i)return!1;switch(n){case ma:return t.toString()===e.toString();case ha:{const o=t.valueOf(),c=e.valueOf();return Ra(o,c)}case va:case ba:case ya:return Object.is(t.valueOf(),e.valueOf());case fa:return t.source===e.source&&t.flags===e.flags;case Ia:return t===e}a=a??new Map;const s=a.get(t),l=a.get(e);if(s!=null&&l!=null)return s===e;a.set(t,e),a.set(e,t);try{switch(n){case ka:{if(t.size!==e.size)return!1;for(const[o,c]of t.entries())if(!e.has(o)||!K(c,e.get(o),o,t,e,a,r))return!1;return!0}case xa:{if(t.size!==e.size)return!1;const o=Array.from(t.values()),c=Array.from(e.values());for(let b=0;b<o.length;b++){const h=o[b],x=c.findIndex(v=>K(h,v,void 0,t,e,a,r));if(x===-1)return!1;c.splice(x,1)}return!0}case wa:case Fa:case La:case Ea:case $a:case Ta:case Pa:case Aa:case Oa:case ja:case Ma:case Ga:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(!K(t[o],e[o],o,t,e,a,r))return!1;return!0}case Ca:return t.byteLength!==e.byteLength?!1:Q(new Uint8Array(t),new Uint8Array(e),a,r);case _a:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Q(new Uint8Array(t),new Uint8Array(e),a,r);case Sa:return t.name===e.name&&t.message===e.message;case ye:{if(!(Q(t.constructor,e.constructor,a,r)||Ee(t)&&Ee(e)))return!1;const o=[...Object.keys(t),...$e(t)],c=[...Object.keys(e),...$e(e)];if(o.length!==c.length)return!1;for(let b=0;b<o.length;b++){const h=o[b],x=t[h];if(!Object.hasOwn(e,h))return!1;const v=e[h];if(!K(x,v,h,t,e,a,r))return!1}return!0}default:return!1}}finally{a.delete(t),a.delete(e)}}function Ba(t,e){return Na(t,e,we)}const fe=Ie;fe.prototype.writeFeatures;fe.prototype.writeFeaturesNode;function Da(t){const{map:e,mode:a}=t,r={stopClick:!0,type:"Circle",style:new X({stroke:new Se({color:"white",width:1.5}),fill:new ge({color:[255,255,255,.75]})}),freehandCondition:s=>s.type==="pointermove"?!1:s.type==="pointerup"?!0:ct(s),condition:()=>!1};a==="box"?r.geometryFunction=pt():delete r.geometryFunction;const n=$(null),i=new lt(r);return i.on("drawend",s=>n.value=s.feature.getGeometry()?.getExtent()??null),e.addInteraction(i),ne(()=>{e.removeInteraction(i)}),{selection:n}}const _e="gfi",za=new J,Wa=t=>t instanceof Z&&t.get("features")?.length?t.get("features"):t,Ha=({map:t,coordinateOrExtent:e,layer:a})=>Promise.resolve((e.length===2?t.getFeaturesAtPixel(t.getPixelFromCoordinate(e),{layerFilter:r=>r===a}):a.getSource().getFeaturesInExtent(e).map(Wa).flat(1)).map(r=>r instanceof Z?JSON.parse(za.writeFeature(r)):!1).filter(r=>r)),Ja=(t,e)=>{const a=new Ce({version:e}),r=new J;return a.readFeatures(t).map(n=>JSON.parse(r.writeFeature(n)))},Ua=({map:t,coordinateOrExtent:e,layerConfiguration:a,layerSpecification:r,mode:n})=>{if(e.length===4&&n!=="bboxDot")return Promise.reject(new Error(`Configuration error in requestGfiWfs.ts: mode must be "bboxDot" to be able to use an extent for gfi requests, but was "${n}".`));const{featureType:i,url:s,version:l}=r,{geometryName:o}=a,c=t.getView().getProjection().getCode(),b=l==="2.0.0"?"typeNames":"typename",h=new URL(s);if(h.searchParams.set("service","WFS"),h.searchParams.set("version",l),h.searchParams.set("request","GetFeature"),h.searchParams.set(b,i),h.searchParams.set("srsName",c),n==="bboxDot"){const x=e.length===2?[e[0]-.1,e[1]-.1,e[0]+.1,e[1]+.1]:e;h.searchParams.set("bbox",`${x.join(",")},${c}`)}else if(n==="intersects"){const x=`<gml:Point srsName="${c}"><gml:coordinates>${e[0]},${e[1]}</gml:coordinates></gml:Point>`;h.searchParams.set("FILTER",l==="2.0.0"?`<fes:Filter><fes:Intersects><fes:ValueReference>${o}</fes:ValueReference>`+x+"</fes:Intersects></fes:Filter>":`<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc"><ogc:Intersects><ogc:PropertyName>${o}</ogc:PropertyName>`+x+"</fes:Intersects></fes:Filter>")}else return Promise.reject(new Error(`Type error in requestGfiWfs.ts: mode must be "intersects" or "bboxDot", but was "${n}".`));return fetch(h,{method:"GET"}).then(x=>x.text()).then(x=>Ja(x,l))},Ae={GML:fe,GML2:Re,GML3:Ie,GML32:Ge};function Va(t){const e=t.split(`
`),a=[];let r;for(const n of e)if(!(n===""||n.startsWith("GetFeatureInfo results")||n.startsWith("Layer"))){if(n.startsWith("    ")){if(typeof r<"u"){const i=n.indexOf("="),[s,l]=[n.substring(0,i),n.substring(i+3,n.length-1)].map(o=>o.trim());r.set(s||"",l)}else console.error(`@polar/polar(plugins/gfi/utils/requestGfiWms:62:5)
`,"@polar/plugin-gfi: Found property before feature declaration in readTextFeatures.",n,"Skipping ...");continue}if(n.startsWith("  ")){if(n.includes("Search returned no results"))break;const i=n.substring(0,n.length-2).trim();r=new Z,r.setId(i),a.push(r)}}return a}function Ka(t){const e=t.includes('xmlns:gml="http://www.opengis.net/gml/3.2"')?Ge:t.includes('xmlns:gml="http://www.opengis.net/gml"')?fe:t.includes('xmlns:gml="http://www.opengis.net/gml/2')?Re:Ie;return new Ce({gmlFormat:new e})}function Ya(t){if(Ae[t])return new Ce({gmlFormat:new Ae[t]});if(t==="text")return{readFeatures:Va};throw new Error(`Format '${t}' not yet implemented in requestGfiWms.ts.`)}function qa({map:t,layer:e,coordinate:a},{infoFormat:r}){const n=e.getSource(),i=t.getView(),s=n.getFeatureInfoUrl(a,i.getResolution(),i.getProjection(),{feature_count:10}),l=r&&typeof r=="string"?`&info_format=${r}`:"";return(s||"")+l}const Qa=t=>{const{coordinate:e,layerConfiguration:a,layerSpecification:r}=t,{filterBy:n,geometryName:i,format:s}=a,l=qa(t,r);return fetch(l).then(o=>o.text()).then(o=>{const c=(r.infoFormat==="application/geojson"?new J:s?Ya(s):Ka(o)).readFeatures(o),b=new J;return i&&c.forEach(h=>{h.setGeometryName("geometry")}),c.filter(h=>n==="clickPosition"?h.getGeometry()?.intersectsCoordinate(e):!0).map(h=>JSON.parse(b.writeFeature(h)))})};function Xa({map:t,layer:e,coordinateOrExtent:a,layerConfiguration:r,layerSpecification:n,mode:i}){const s=e.get("id");try{const l={map:t,layerConfiguration:r,layerSpecification:n};if(e instanceof dt||e instanceof ut)return a.length===2?Qa({...l,coordinate:a,layer:e}):Promise.reject(new Error(`An extent can not be used for ${s} as it is a WMS layer which only support coordinates for gfi requests.`));if(Me.getLayerWhere({id:s})?.typ==="GeoJSON"&&e instanceof ie)return Ha({...l,coordinateOrExtent:a,layer:e});if(e instanceof ie)return Ua({...l,coordinateOrExtent:a,mode:i});const o=`Layer ${s} was neither a Tile- nor a VectorLayer. GFI not implemented.`;return Promise.reject(new Error(o))}catch{const l=`An error occurred while requesting features from layer with the id ${s}.`;return Promise.reject(new Error(l))}}function Za({pixel:t,dragging:e,originalEvent:a,map:r},n,i){if(e||"pointerType"in a&&["touch","pen"].includes(a.pointerType))return null;let s=!1,l=null;return r.forEachFeatureAtPixel(t,(o,c)=>{if(!(o instanceof Z))return!1;s=!0,n.setPosition(r.getCoordinateFromPixel(t)),l&&l();let b;return{element:b,unregister:l}=Je(i[c.get("id")]?.(o)),n.setElement(b),!0},{layerFilter:o=>Object.keys(i).includes(o.get("id"))}),s||n.setPosition(void 0),l}function en(){const t=new ie({source:new pe({features:[]})});return t.set("polarInternalId","pluginGfiFeatureDisplay"),t.setZIndex(90),t.set("styleId","defaultHighlightFeaturesPoint"),t}function Ke(t){return t instanceof pe}function tn(t){const e=t.getSource();Ke(e)&&e.clear()}function an(t,e){const a=e.getSource();Ke(a)&&a.addFeature(new J().readFeature(t))}function nn(t){const{map:e,style:a,features:r}=t,n=en();return e.addLayer(n),ne(()=>{e.removeLayer(n)}),A(a,i=>{n.setStyle(i)},{immediate:!0}),A(r,i=>{tn(n),i.forEach(s=>{an(s,n)})},{immediate:!0,deep:!0}),{}}const rn=new J;function Ye(t){return rn.writeFeatureObject(t)}const Oe={stroke:{color:"#003064",width:3},fill:{color:"rgb(255, 255, 255, 0.7)"}},Fe=W("plugins/gfi/main",()=>{const t=M(),e=y(()=>t.configuration[_e]);function a(l){return e.value.layers[l]}const r=$({}),n=$({});A(r,l=>{n.value=Object.fromEntries(Object.entries(l).map(([o,c])=>[o,c.map(b=>Ye(b))]))},{immediate:!0,deep:!0});const i=y(()=>new X({stroke:new Se(e.value.customHighlightStyle?.stroke||Oe.stroke),fill:new ge(e.value.customHighlightStyle?.fill||Oe.fill)})),s=y(()=>Object.entries(n.value).filter(([l])=>a(l)?.geometry??!0).flatMap(([,l])=>l));return nn({map:t.map,style:i,features:s}),{configuration:e,getLayerConfiguration:a,selectedFeatures:r,featureInformation:n}}),on=W("plugins/gfi/feature",()=>{const t=M(),e=Fe();async function a(v,w={}){let u=Object.fromEntries((await Promise.all(Object.entries(e.configuration.layers).map(([f,k])=>({layerId:f,layerConfiguration:k,layer:t.getLayer(f)})).filter(f=>!!f.layer).map(async({layerId:f,layer:k,layerConfiguration:E})=>[f,(await Xa({coordinateOrExtent:v,layer:k,layerConfiguration:E,layerSpecification:Me.getLayerWhere({id:f}),map:t.map,mode:t.configuration.layers.find(C=>C.id===f)?.gfiMode||e.configuration.mode||"bboxDot"})).filter(C=>!E.isSelectable||E.isSelectable(C)).slice(0,e.configuration.maxFeatures||Number.POSITIVE_INFINITY)]))).filter(f=>!!f));if(e.configuration.afterLoadFunction&&(u=e.configuration.afterLoadFunction(u)),w.toggleSelection){Object.entries(u).forEach(([f,k])=>{e.featureInformation[f]||(e.featureInformation[f]=[]);const E=e.featureInformation[f];k.forEach(C=>{const B=E.findIndex(ee=>Ba(ee.properties,C.properties));B<0?E.push(C):E.splice(B,1)})});return}e.featureInformation=u}for(const v of e.configuration.coordinateSources||[]){const w=v.plugin?t.getPluginStore(v.plugin):t;w&&A(()=>w[v.key],async u=>{u?await a(u):e.featureInformation={}},{immediate:!0})}if(e.configuration.multiSelect){const v=Da({map:t.map,mode:e.configuration.multiSelect});A(v.selection,async w=>{w?await a(w):e.featureInformation={}})}if(e.configuration.directSelect){async function v({coordinate:w,originalEvent:u}){await a(w,{toggleSelection:navigator.userAgent.indexOf("Mac")!==-1?u.metaKey:u.ctrlKey})}t.map.on("click",v),ne(()=>{t.map.un("click",v)})}const r=y(()=>Object.entries(e.featureInformation).filter(([v])=>e.configuration.layers[v]?.window).flatMap(([v,w])=>w.map(u=>({layerId:v,feature:u})))),n=$(0),i=y(()=>r.value[n.value]),s=y(()=>e.getLayerConfiguration(i.value?.layerId||"")),l=y(()=>s.value?.properties),o=y(()=>Object.fromEntries(Object.entries(i.value?.feature.properties||{}).filter(([v])=>!l.value||l.value.includes(v)).map(([v,w])=>[v,w]))),c=y(()=>s.value?.exportProperty),b=y(()=>c.value?i.value?.feature.properties?.[c.value]:null);A(r,()=>{n.value=0},{deep:!0});const h=new je({positioning:"bottom-center",offset:[0,-5]});t.map.addOverlay(h);let x=null;return t.map.on("pointermove",v=>{x&&x(),x=Za(v,h,Object.fromEntries(Object.entries(e.configuration.layers).filter(([,{showTooltip:w}])=>!!w).map(([w,{showTooltip:u}])=>[w,u])))}),ne(()=>{x&&x(),t.map.removeOverlay(h)}),e.configuration.renderType==="iconMenu"&&Ct(()=>{const v=t.getPluginStore("iconMenu");v&&A(i,w=>{w&&v.openMenuById(_e)})}),{visibleFeatures:r,selectedFeatureIndex:n,selectedFeature:i,selectedFeatureProperties:o,exportProperty:b}});function sn(t){let e=t.getSource();if(!e)throw new Error("Could not find a vector source for this layer");for(;e instanceof Dt;)if(e=e.getSource(),!e)throw new Error("Could not find a vector source for this layer");if(!(e instanceof pe))throw new Error("Could not find a vector source for this layer");return e}function ln(t,e,a){return a==="loaded"?e.getFeatures():e.getFeaturesInExtent(t.getView().calculateExtent(t.getSize()),t.getView().getProjection())}const cn=W("plugins/gfi/list",()=>{const t=M(),e=Fe(),a=$({}),{selectedFeatures:r}=G(e),n=y(()=>e.configuration.featureList),i=y(()=>{if(!n.value)return[];const u=n.value.activeLayers,f=st(u);return f?f[u.key]:[]}),s=y(()=>(t.extent,Object.fromEntries(i.value.map(u=>({layerId:u,layerConfiguration:e.getLayerConfiguration(u),layer:t.getLayer(u)})).filter(u=>!!u.layerConfiguration&&!!u.layer).map(({layerId:u,layerConfiguration:f,layer:k})=>{const E=sn(k);return[u,ln(t.map,E,n.value?.mode||"visible").filter(C=>Bt(C)).filter(C=>!f.isSelectable||f.isSelectable(Ye(C))).map(C=>({feature:C,...n.value?.bindWithCoreHoverSelect?{hovered:t.hoveredFeature===C||t.hoveredFeature?.get("features")?.includes(C)}:{}}))]}).filter(u=>!!u))));A([()=>n.value?.bindWithCoreHoverSelect,()=>t.selectedFeature],([u,f])=>{u&&(f?r.value[f.get("_polarLayerId")]=f.get("features")||[f]:r.value={})},{immediate:!0,deep:!0}),A([()=>n.value?.bindWithCoreHoverSelect,()=>a.value],([u,f])=>{if(u){const k=Object.entries(f).flatMap(([E,C])=>C.map(B=>({layerId:E,feature:B})));if(k.length<=0||!k[0]){t.hoveredFeature=null;return}k[0].feature.set("_polarLayerId",k[0].layerId),t.hoveredFeature=k[0].feature}},{immediate:!0,deep:!0}),A([()=>n.value?.bindWithCoreHoverSelect,()=>r.value],([u,f])=>{if(u){const k=Object.values(f).flat();if(k.length<=0){t.selectedFeature=null;return}t.selectedFeature=k[0]}},{immediate:!0,deep:!0});const l=y(()=>Object.entries(s.value).flatMap(([u,f])=>f.map(k=>({layerId:u,...k})))),o=$(0),c=y(()=>n.value?.pageLength??0),b=y(()=>typeof n.value?.pageLength=="number"),h=y({get:()=>b.value?o.value*c.value:0,set:u=>{o.value=b.value?Math.round(u/c.value):0}}),x=y(()=>b.value?h.value+c.value:void 0),v=y(()=>l.value.slice(h.value,x.value));function w(u,f){const k=n.value?.text?.[f];return typeof k=="string"?k:typeof k=="function"?k(u):null}return{features:s,hoveredFeatures:a,flatFeatures:l,paginationActive:b,pageLength:c,page:o,paginationStartIndex:h,paginationEndIndex:x,paginatedFeatures:v,getText:w}}),me=W("plugins/gfi",()=>{const t=Fe(),e=G(t),a=cn(),r=G(a),n=on(),i=G(n);return{configuration:e.configuration,hoveredFeatures:r.hoveredFeatures,selectedFeatures:e.selectedFeatures,featureInformation:e.featureInformation,listFeatures:r.features,listFlatFeatures:r.flatFeatures,listPaginationActive:r.paginationActive,listPageLength:r.pageLength,listPage:r.page,listPaginationStartIndex:r.paginationStartIndex,listPaginationEndIndex:r.paginationEndIndex,listPaginatedFeatures:r.paginatedFeatures,listGetText:a.getText,features:i.visibleFeatures,featureIndex:i.selectedFeatureIndex,feature:i.selectedFeature,properties:i.selectedFeatureProperties,exportProperty:i.exportProperty}});function dn(t){let e;try{e=new URL(t)}catch{return!1}return e.protocol==="http:"||e.protocol==="https:"}const un={style:{display:"flex",gap:"var(--kern-metric-space-default)"}},pn={class:"kern-table kern-table--striped"},gn={class:"kern-table__head"},fn={class:"kern-table__row"},mn={scope:"col",class:"kern-table__header"},hn={scope:"col",class:"kern-table__header"},vn={class:"kern-table__body"},yn={class:"kern-table__cell"},bn={class:"kern-table__cell"},kn=["href"],xn=["src","alt","title","height"],wn=["href","title"],In=z({__name:"GfiFeature.ce",props:{layerId:{type:String},feature:{type:Object}},setup(t){const e=M(),a=me(),r=t;function n(i){open(i)}return(i,s)=>(d(),g(_,null,[m("div",un,[xe(be,{hint:i.$t(l=>l.header.close,{ns:"gfi"}),icon:"kern-icon--close",onClick:s[0]||(s[0]=l=>p(a).selectedFeatures={})},null,8,["hint"]),xe(be,{hint:i.$t(l=>l.property.export,{ns:"gfi"}),icon:"kern-icon--download",onClick:s[1]||(s[1]=l=>n(p(a).exportProperty))},null,8,["hint"])]),m("table",pn,[m("thead",gn,[m("tr",fn,[m("th",mn,F(i.$t(l=>l.header.field,{ns:"gfi"})),1),m("th",hn,F(i.$t(l=>l.header.value,{ns:"gfi"})),1)])]),m("tbody",vn,[(d(!0),g(_,null,R(Object.entries(p(a).properties),([l,o])=>(d(),g("tr",{key:l,class:"kern-table__row"},[m("td",yn,F(i.$t(c=>c.layer[r.layerId].property[l],{ns:"gfi",defaultValue:l})),1),m("td",bn,[p(dn)(o)?(d(),g(_,{key:0},[["jpg","jpeg","png","gif","webp"].some(c=>o.endsWith(`.${c}`))?(d(),g("a",{key:0,href:o,target:"_blank"},[m("img",{src:o,alt:i.$t(c=>c.property.imageAlt,{ns:"gfi"}),title:i.$t(c=>c.property.linkTitle,{ns:"gfi"}),height:Math.min(200,p(e).clientHeight*.15),width:"auto"},null,8,xn)],8,kn)):(d(),g("a",{key:1,href:o,target:"_blank",title:i.$t(c=>c.property.linkTitle,{ns:"gfi"})},F(i.$t(c=>c.property.linkText,{ns:"gfi"})),9,wn))],64)):(d(),g(_,{key:1},[re(F(o),1)],64))])]))),128))])])],64))}}),Cn="td[data-v-771b9270]{white-space:normal}",Sn=P(In,[["styles",[Cn]],["__scopeId","data-v-771b9270"]]),_n=["aria-label"],Fn=["disabled"],Ln={class:"kern-label kern-sr-only"},En=["aria-label","onClick"],$n={class:"kern-label"},Tn=["disabled"],Pn={class:"kern-label kern-sr-only"},An=z({__name:"KernPagination.ce",props:Ft({count:{type:Number},pageSize:{type:Number}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=t,a=Lt(t,"modelValue"),r=y({get:()=>a.value/e.pageSize+1,set:s=>{a.value=(s-1)*e.pageSize}}),n=y(()=>Math.ceil(e.count/e.pageSize));A([()=>e.count,()=>e.pageSize],()=>{r.value>n.value&&(a.value=0)});const i=y(()=>{const s=(l,o)=>new Array(o-l+1).fill(null).map((c,b)=>({page:b+l}));return n.value<=7?s(1,n.value):r.value<5?[...s(1,5),{dots:"only"},...s(n.value,n.value)]:r.value>n.value-4?[...s(1,1),{dots:"only"},...s(n.value-4,n.value)]:[...s(1,1),{dots:"only"},...s(r.value-1,r.value+1),{dots:"only"},...s(n.value,n.value)]});return(s,l)=>n.value>1?(d(),g("nav",{key:0,"aria-label":s.$t(o=>o.pagination.wrapper,{ns:"shared"})},[m("ul",null,[m("li",null,[m("button",{class:"kern-btn kern-btn--secondary",disabled:r.value<=1,onClick:l[0]||(l[0]=o=>r.value--)},[l[2]||(l[2]=m("span",{class:"kern-icon kern-icon--arrow-back"},null,-1)),m("span",Ln,F(s.$t(o=>o.pagination.previous,{ns:"shared"})),1)],8,Fn)]),(d(!0),g(_,null,R(i.value,o=>(d(),g("li",{key:"dots"in o?o.dots:o.page},["dots"in o?(d(),g(_,{key:0},[re("…")],64)):o.page?(d(),g("button",{key:1,class:ue(["kern-btn kern-btn--secondary",{active:r.value===o.page}]),"aria-label":s.$t(c=>c.pagination.page,{ns:"shared",page:o.page}),onClick:c=>r.value=o.page},[m("span",$n,F(o.page),1)],10,En)):j("",!0)]))),128)),m("li",null,[m("button",{class:"kern-btn kern-btn--secondary",disabled:r.value>=n.value,onClick:l[1]||(l[1]=o=>r.value++)},[l[3]||(l[3]=m("span",{class:"kern-icon kern-icon--arrow-forward"},null,-1)),m("span",Pn,F(s.$t(o=>o.pagination.next,{ns:"shared"})),1)],8,Tn)])])],8,_n)):j("",!0)}}),On="nav[data-v-03afd393]{width:100%}ul[data-v-03afd393]{width:100%;display:flex;list-style-type:none;padding:0;align-items:center;justify-content:space-between;gap:var(--kern-metric-space-x-small)}.kern-btn{&[data-v-03afd393]{padding:0;min-width:var(--kern-metric-dimension-large);min-height:calc(var(--kern-metric-dimension-large) + var(--kern-metric-dimension-2x-small))}&[data-v-03afd393]:has(.kern-sr-only){width:var(--kern-metric-dimension-large)}&.active{&[data-v-03afd393]{background-color:var(--kern-color-action-default);pointer-events:none}.kern-label[data-v-03afd393]{color:#fff}}.kern-label[data-v-03afd393]{font-size:var(--kern-typography-font-size-static-small);line-height:var(--kern-typography-line-height-static-small)}}",jn=P(An,[["styles",[On]],["__scopeId","data-v-03afd393"]]),Mn={class:"kern-heading-medium"},Gn=["onClick","onMouseenter"],Rn={class:"kern-title kern-title--small"},Nn=z({__name:"GfiFeatureList.ce",setup(t){const e=me();return(a,r)=>(d(),g(_,null,[m("h2",Mn,F(a.$t(n=>n.list.header,{ns:"gfi"})),1),p(e).listFlatFeatures.length===0?(d(),g(_,{key:0},[re(F(a.$t(n=>n.list.emptyView,{ns:"gfi"})),1)],64)):(d(),g(_,{key:1},[p(e).listPaginationActive?(d(),D(jn,{key:0,modelValue:p(e).listPaginationStartIndex,"onUpdate:modelValue":r[0]||(r[0]=n=>p(e).listPaginationStartIndex=n),count:p(e).listFlatFeatures.length,"page-size":p(e).listPageLength},null,8,["modelValue","count","page-size"])):j("",!0),(d(!0),g(_,null,R(p(e).listPaginatedFeatures,({layerId:n,feature:i,hovered:s},l)=>(d(),g("section",{key:l,tabindex:"0",class:ue({hovered:s}),onClick:o=>{p(e).selectedFeatures={[n]:[i]},p(e).hoveredFeatures={}},onMouseenter:o=>p(e).hoveredFeatures={[n]:[i]},onMouseleave:r[1]||(r[1]=o=>p(e).hoveredFeatures={})},[m("h2",Rn,F(p(e).listGetText(i,"title")),1),re(" "+F(p(e).listGetText(i,"subtitle"))+" ",1),r[2]||(r[2]=m("br",null,null,-1)),m("em",null,F(p(e).listGetText(i,"subSubtitle")),1)],42,Gn))),128))],64))],64))}}),Bn="section{&[data-v-5b75ce3e]{width:100%;padding:var(--kern-metric-space-small);overflow:hidden;text-overflow:ellipsis;border-width:var(--kern-metric-border-width-default);border-style:dashed;border-color:transparent}&.hovered[data-v-5b75ce3e],&[data-v-5b75ce3e]:hover{border-radius:var(--kern-metric-border-radius-default);border-color:var(--kern-color-action-default);cursor:pointer}}",Dn=P(Nn,[["styles",[Bn]],["__scopeId","data-v-5b75ce3e"]]),zn={class:"kern-label"},Wn={class:"kern-label"},Hn=z({__name:"GfiUI.ce",setup(t){const e=M(),a=me();return(r,n)=>p(a).features.length>0||p(a).configuration.featureList?(d(),D(Ne,{key:0,id:"polar-card-gfi",class:ue({standard:p(e).layout==="standard","nine-regions":p(e).layout==="nineRegions"})},{default:We(()=>[p(a).features.length>0?(d(),g(_,{key:0},[p(a).feature?(d(),D(Sn,St(_t({key:0},p(a).feature)),null,16)):j("",!0),p(a).featureIndex>0?(d(),g("button",{key:1,class:"kern-btn kern-btn--block kern-btn--secondary",onClick:n[0]||(n[0]=i=>p(a).featureIndex--)},[n[2]||(n[2]=m("span",{class:"kern-icon kern-icon--arrow-back","aria-hidden":"true"},null,-1)),m("span",zn,F(r.$t(i=>i.switch.previous,{ns:"gfi"})),1)])):j("",!0),p(a).featureIndex+1<p(a).features.length?(d(),g("button",{key:2,class:"kern-btn kern-btn--block kern-btn--primary",onClick:n[1]||(n[1]=i=>p(a).featureIndex++)},[m("span",Wn,F(r.$t(i=>i.switch.next,{ns:"gfi"})),1),n[3]||(n[3]=m("span",{class:"kern-icon kern-icon--arrow-forward","aria-hidden":"true"},null,-1))])):j("",!0)],64)):p(a).configuration.featureList?(d(),D(Dn,{key:1})):j("",!0)]),_:1},8,["class"])):j("",!0)}}),Jn="#polar-card-gfi{&[data-v-da165ae8]{width:12em;margin:var(--kern-metric-space-small);max-height:80%;overflow:auto}&.standard[data-v-da165ae8]{position:absolute}&[data-v-da165ae8]::deep(.kern-card__container){width:100%;padding-bottom:var(--kern-metric-space-small)}}button[data-v-da165ae8]{margin-top:var(--kern-metric-space-small)}",Un=P(Hn,[["styles",[Jn]],["__scopeId","data-v-da165ae8"]]),Vn={header:{close:"Informationsfenster schließen",field:"Feld",value:"Wert"},property:{export:"Export als PDF",imageAlt:"Bitte entnehmen Sie Informationen zum Inhalt des Bildes aus den umliegenden Tabellenfeldern",linkTitle:"In neuem Tab öffnen",linkText:"Link"},switch:{previous:"Vorangehender Datensatz",next:"Nächster Datensatz"},noActiveLayer:"Derzeit ist kein Kartenmaterial mit passenden Objekten eingeschaltet.",list:{header:"Objektliste",entry:"Eintrag",to:"bis",of:"von",emptyView:"Im aktuellen Kartenausschnitt sind keine Objekte enthalten."}},Kn={header:{close:"Close information window",field:"Field",value:"Value"},property:{export:"Export as a PDF document",imageAlt:"Please refer to the other table fields for further information about the topics of the displayed picture",linkTitle:"Open in a new tab",linkText:"Link"},switch:{previous:"Previous data",next:"Next data"},noActiveLayer:"Currently, no map layer with fitting objects is active.",list:{header:"Feature list",entry:"Entry",to:"to",of:"of",emptyView:"There are no features in the current view."}},Yn=[{type:"de",resources:Vn},{type:"en",resources:Kn}];function qn(t){return{id:_e,component:Un,locales:Yn,storeModule:me,options:t,icon:"kern-icon--map-pin-heart"}}const Qn=["KernLoader","BasicLoader","RingLoader","RollerLoader","CircleLoader","SpinnerLoader"],qe=W("plugins/loadingIndicator",()=>{const t=$(new Set),e=$("KernLoader"),a=y(()=>t.value.size>0);function r(){const o=M().configuration.loadingIndicator?.loaderStyle;o&&l(o)}function n(){l("KernLoader")}function i(o){t.value=new Set([...t.value,o])}function s(o){const c=new Set(t.value);c.delete(o),t.value=c}function l(o){Qn.includes(o)?e.value=o:console.error(`@polar/polar(plugins/loadingIndicator/store:62:5)
`,`Loader style ${o} does not exist. Using previous style (${e.value}).`)}return{loaderStyle:e,showLoader:a,addLoadingKey:i,removeLoadingKey:s,setLoaderStyle:l,setupPlugin:r,teardownPlugin:n}}),Xn={class:"lds-default"},Zn=z({__name:"BasicLoader.ce",setup(t){return(e,a)=>(d(),g("div",Xn,[(d(),g(_,null,R(12,r=>m("div",{key:r})),64))]))}}),er=".lds-default[data-v-6079aaec]{color:var(--kern-color-action-default)}.lds-default[data-v-6079aaec],.lds-default div[data-v-6079aaec]{box-sizing:border-box}.lds-default[data-v-6079aaec]{display:inline-block;position:relative;width:80px;height:80px}.lds-default div[data-v-6079aaec]{position:absolute;width:6.4px;height:6.4px;background:currentColor;border-radius:50%;animation:lds-default-6079aaec 1.2s linear infinite}.lds-default div[data-v-6079aaec]:nth-child(1){animation-delay:0s;top:36.8px;left:66.24px}.lds-default div[data-v-6079aaec]:nth-child(2){animation-delay:-.1s;top:22.08px;left:62.29579px}.lds-default div[data-v-6079aaec]:nth-child(3){animation-delay:-.2s;top:11.30421px;left:51.52px}.lds-default div[data-v-6079aaec]:nth-child(4){animation-delay:-.3s;top:7.36px;left:36.8px}.lds-default div[data-v-6079aaec]:nth-child(5){animation-delay:-.4s;top:11.30421px;left:22.08px}.lds-default div[data-v-6079aaec]:nth-child(6){animation-delay:-.5s;top:22.08px;left:11.30421px}.lds-default div[data-v-6079aaec]:nth-child(7){animation-delay:-.6s;top:36.8px;left:7.36px}.lds-default div[data-v-6079aaec]:nth-child(8){animation-delay:-.7s;top:51.52px;left:11.30421px}.lds-default div[data-v-6079aaec]:nth-child(9){animation-delay:-.8s;top:62.29579px;left:22.08px}.lds-default div[data-v-6079aaec]:nth-child(10){animation-delay:-.9s;top:66.24px;left:36.8px}.lds-default div[data-v-6079aaec]:nth-child(11){animation-delay:-1s;top:62.29579px;left:51.52px}.lds-default div[data-v-6079aaec]:nth-child(12){animation-delay:-1.1s;top:51.52px;left:62.29579px}@keyframes lds-default-6079aaec{0%,20%,80%,to{transform:scale(1)}50%{transform:scale(1.5)}}",tr=P(Zn,[["styles",[er]],["__scopeId","data-v-6079aaec"]]),ar={},nr=".lds-circle[data-v-149ac9d5]{color:var(--kern-color-action-default)}.lds-circle[data-v-149ac9d5],.lds-circle div[data-v-149ac9d5]{box-sizing:border-box}.lds-circle[data-v-149ac9d5]{display:inline-block;transform:translateZ(1px);width:80px;height:80px}.lds-circle>div[data-v-149ac9d5]{display:inline-block;width:64px;height:64px;margin:8px;background:currentColor;border-radius:50%;animation:lds-circle-149ac9d5 2.4s cubic-bezier(0,.2,.8,1) infinite}@keyframes lds-circle-149ac9d5{0%,to{animation-timing-function:cubic-bezier(.5,0,1,.5)}0%{transform:rotateY(0)}50%{transform:rotateY(1800deg);animation-timing-function:cubic-bezier(0,.5,.5,1)}to{transform:rotateY(3600deg)}}",rr={class:"lds-circle"};function ir(t,e,a,r,n,i){return d(),g("div",rr,[...e[0]||(e[0]=[m("div",null,null,-1)])])}const or=P(ar,[["render",ir],["styles",[nr]],["__scopeId","data-v-149ac9d5"]]),sr={},lr=".lds-ring[data-v-712a38e8]{color:var(--kern-color-action-default)}.lds-ring[data-v-712a38e8],.lds-ring div[data-v-712a38e8]{box-sizing:border-box}.lds-ring[data-v-712a38e8]{display:inline-block;position:relative;width:80px;height:80px}.lds-ring div[data-v-712a38e8]{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid currentColor;border-radius:50%;animation:lds-ring-712a38e8 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:currentColor transparent transparent transparent}.lds-ring div[data-v-712a38e8]:nth-child(1){animation-delay:-.45s}.lds-ring div[data-v-712a38e8]:nth-child(2){animation-delay:-.3s}.lds-ring div[data-v-712a38e8]:nth-child(3){animation-delay:-.15s}@keyframes lds-ring-712a38e8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}",cr={class:"lds-ring"};function dr(t,e,a,r,n,i){return d(),g("div",cr,[(d(),g(_,null,R(4,s=>m("div",{key:s})),64))])}const ur=P(sr,[["render",dr],["styles",[lr]],["__scopeId","data-v-712a38e8"]]),pr={},gr='.lds-roller[data-v-c8254b29]{color:var(--kern-color-action-default)}.lds-roller[data-v-c8254b29],.lds-roller div[data-v-c8254b29],.lds-roller div[data-v-c8254b29]:after{box-sizing:border-box}.lds-roller[data-v-c8254b29]{display:inline-block;position:relative;width:80px;height:80px}.lds-roller div[data-v-c8254b29]{animation:lds-roller-c8254b29 1.2s cubic-bezier(.5,0,.5,1) infinite;transform-origin:40px 40px}.lds-roller div[data-v-c8254b29]:after{content:" ";display:block;position:absolute;width:7.2px;height:7.2px;border-radius:50%;background:currentColor;margin:-3.6px 0 0 -3.6px}.lds-roller div[data-v-c8254b29]:nth-child(1){animation-delay:-36ms}.lds-roller div[data-v-c8254b29]:nth-child(1):after{top:62.62742px;left:62.62742px}.lds-roller div[data-v-c8254b29]:nth-child(2){animation-delay:-72ms}.lds-roller div[data-v-c8254b29]:nth-child(2):after{top:67.71281px;left:56px}.lds-roller div[data-v-c8254b29]:nth-child(3){animation-delay:-.108s}.lds-roller div[data-v-c8254b29]:nth-child(3):after{top:70.90963px;left:48.28221px}.lds-roller div[data-v-c8254b29]:nth-child(4){animation-delay:-.144s}.lds-roller div[data-v-c8254b29]:nth-child(4):after{top:72px;left:40px}.lds-roller div[data-v-c8254b29]:nth-child(5){animation-delay:-.18s}.lds-roller div[data-v-c8254b29]:nth-child(5):after{top:70.90963px;left:31.71779px}.lds-roller div[data-v-c8254b29]:nth-child(6){animation-delay:-.216s}.lds-roller div[data-v-c8254b29]:nth-child(6):after{top:67.71281px;left:24px}.lds-roller div[data-v-c8254b29]:nth-child(7){animation-delay:-.252s}.lds-roller div[data-v-c8254b29]:nth-child(7):after{top:62.62742px;left:17.37258px}.lds-roller div[data-v-c8254b29]:nth-child(8){animation-delay:-.288s}.lds-roller div[data-v-c8254b29]:nth-child(8):after{top:56px;left:12.28719px}@keyframes lds-roller-c8254b29{0%{transform:rotate(0)}to{transform:rotate(360deg)}}',fr={class:"lds-roller"};function mr(t,e,a,r,n,i){return d(),g("div",fr,[(d(),g(_,null,R(8,s=>m("div",{key:s})),64))])}const hr=P(pr,[["render",mr],["styles",[gr]],["__scopeId","data-v-c8254b29"]]),vr={},yr='.lds-spinner[data-v-1790c8de]{color:var(--kern-color-action-default)}.lds-spinner[data-v-1790c8de],.lds-spinner div[data-v-1790c8de],.lds-spinner div[data-v-1790c8de]:after{box-sizing:border-box}.lds-spinner[data-v-1790c8de]{color:currentColor;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner div[data-v-1790c8de]{transform-origin:40px 40px;animation:lds-spinner-1790c8de 1.2s linear infinite}.lds-spinner div[data-v-1790c8de]:after{content:" ";display:block;position:absolute;top:3.2px;left:36.8px;width:6.4px;height:17.6px;border-radius:20%;background:currentColor}.lds-spinner div[data-v-1790c8de]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner div[data-v-1790c8de]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner div[data-v-1790c8de]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner div[data-v-1790c8de]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner div[data-v-1790c8de]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner div[data-v-1790c8de]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner div[data-v-1790c8de]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner div[data-v-1790c8de]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner div[data-v-1790c8de]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner div[data-v-1790c8de]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner div[data-v-1790c8de]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner div[data-v-1790c8de]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner-1790c8de{0%{opacity:1}to{opacity:0}}',br={class:"lds-spinner"};function kr(t,e,a,r,n,i){return d(),g("div",br,[(d(),g(_,null,R(12,s=>m("div",{key:s})),64))])}const xr=P(vr,[["render",kr],["styles",[yr]],["__scopeId","data-v-1790c8de"]]),wr={key:0,class:"polar-plugin-loading-indicator-wrapper"},Ir={key:0,class:"polar-plugin-loading-indicator-overlay"},Cr={key:0,class:"kern-loader kern-loader--visible",role:"status"},Sr=z({__name:"LoadingIndicator.ce",setup(t){const{layout:e}=G(M()),{loaderStyle:a,showLoader:r}=G(qe()),n={BasicLoader:tr,CircleLoader:or,RingLoader:ur,RollerLoader:hr,SpinnerLoader:xr};return(i,s)=>p(r)&&p(a)!==null?(d(),g("div",wr,[p(e)==="standard"?(d(),g("div",Ir)):j("",!0),xe(Ne,null,{default:We(()=>[p(a)==="KernLoader"?(d(),g("div",Cr)):(d(),D(ke(n[p(a)]),{key:1,class:"kern-loader--visible",role:"status"}))]),_:1})])):j("",!0)}}),_r=".polar-plugin-loading-indicator-wrapper{&[data-v-d34e6512]{z-index:100;position:absolute;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.polar-plugin-loading-indicator-overlay[data-v-d34e6512]{position:absolute;width:100%;height:100%;opacity:var(--kern-color-action-state-opacity-overlay);background:#fff}.kern-card[data-v-d34e6512]{min-width:fit-content;height:fit-content;border-radius:50%}[data-v-d34e6512] .kern-card__container{padding:var(--kern-metric-space-small)!important}}",Fr=P(Sr,[["styles",[_r]],["__scopeId","data-v-d34e6512"]]),Lr="loadingIndicator";function Er(t){return{id:Lr,component:Fr,storeModule:qe,options:t}}const $r={style:{background:"#fff"}},Tr=se({__name:"EmptyComponent",setup(t){return(e,a)=>(ce(),le("div",$r,"HELLO THERE"))}}),Pr={class:"kern-btn kern-btn--tertiary",style:{"border-radius":"0.25rem","min-height":"2rem",width:"2rem"}},Ar=se({__name:"MockAttributions.ce",setup(t){return(e,a)=>(ce(),le("button",Pr,[...a[0]||(a[0]=[q("span",{class:"kern-icon kern-icon-fill--copyright",style:{color:"var(--kern-color-action-default)"}},null,-1)])]))}}),Or={style:{display:"flex",gap:"0.5rem"}},jr=se({__name:"MockPointerPosition.ce",setup(t){return(e,a)=>(ce(),le("div",Or,[...a[0]||(a[0]=[q("span",{class:"kern-icon kern-icon--fullscreen","aria-hidden":"true"},null,-1),q("span",{style:{display:"flex","align-items":"center"}},"9.9555 | 53.5479",-1),q("button",{class:"kern-btn kern-btn--tertiary",style:{"min-height":"1rem","font-size":"1.125rem","text-decoration-line":"underline","text-underline-offset":"2px","text-underline-position":"from-font",color:"#1a3da5"}}," EPSG:4326 ",-1)])]))}}),Qe=[{id:"23420",name:"basemap.de Web Raster Farbe",url:"https://sgx.geodatenzentrum.de/wms_basemapde",typ:"WMS",layers:"de_basemapde_web_raster_farbe",format:"image/png",version:"1.3.0",singleTile:!1,transparent:!0,transparency:0,urlIsVisible:!0,tilesize:512,gutter:0,minScale:"0",maxScale:"2500000",legendURL:"",cache:!1,featureCount:5},{id:"23421",name:"basemap.de Web Raster Grau",url:"https://sgx.geodatenzentrum.de/wms_basemapde",typ:"WMS",layers:"de_basemapde_web_raster_grau",format:"image/png",version:"1.3.0",singleTile:!1,transparent:!0,transparency:0,urlIsVisible:!0,tilesize:512,gutter:0,minScale:"0",maxScale:"2500000",legendURL:"",cache:!1,featureCount:5},{id:"1454",name:"Ausgleichsflächen",url:"https://geodienste.hamburg.de/HH_WFS_Ausgleichsflaechen",typ:"WFS",featureType:"ausgleichsflaechen",outputFormat:"XML",version:"1.1.0",featureNS:"https://registry.gdi-de.org/id/de.hh.up",featurePrefix:"de.hh.up",legendURL:""},{id:"6059",name:"MML Anliegen",url:"https://geodienste.hamburg.de/lgv-config/anliegen_extern.json",typ:"GeoJSON",format:"XML",version:"1.0",minScale:"0",maxScale:"2500000",legendURL:"",urlIsVisible:!0,clusterDistance:20},{id:"denkmaelerWMS",name:"Denkmal WMS",url:"https://efi2-deegree.schleswig-holstein.de/dish-deegree/services/wms_shp",typ:"WMS",layers:"0,1,2,3,4,6,24,25",legendURL:"ignore",format:"image/png",version:"1.3.0",transparent:!0},{id:"1693",name:"Landesgrenze",url:"https://geodienste.hamburg.de/HH_WFS_Verwaltungsgrenzen",typ:"WFS",featureType:"landesgrenze",outputFormat:"XML",version:"1.1.0",featureNS:"http://www.deegree.org/app",featurePrefix:"app"},{id:"kiel_polygon",name:"Kiel Polygon",url:"https://polar.dataport.de/qgisserver?MAP=/home/qgis/projects/dev_services.qgz",typ:"WFS",featureType:"polygon_kiel",outputFormat:"XML",version:"1.1.0",legendURL:""}],Mr="data:application/json;base64,WwoJewoJCSJzdHlsZUlkIjogInBhbmRhIiwKCQkicnVsZXMiOiBbCgkJCXsKCQkJCSJzdHlsZSI6IHsKCQkJCQkicG9seWdvblN0cm9rZUNvbG9yIjogWzMsIDI1NSwgMSwgMV0sCgkJCQkJInBvbHlnb25GaWxsSGF0Y2giOiB7CgkJCQkJCSJiYWNrZ3JvdW5kQ29sb3IiOiBbMCwgMCwgMCwgMC4yNV0sCgkJCQkJCSJwYXR0ZXJuIjogImRpYWdvbmFsLXJpZ2h0IiwKCQkJCQkJInBhdHRlcm5Db2xvciI6IFszLCAyNTUsIDEsIDFdCgkJCQkJfQoJCQkJfQoJCQl9CgkJXQoJfQpdCg==",Gr={style:{background:"#fff","z-index":"99999","pointer-events":"all"}},Rr=se({__name:"YetAnotherEmptyComponent",setup(t){const e=document.getElementById("snowbox").store;function a(){e.center=[561210,5932600]}return(r,n)=>(ce(),le("div",Gr,[n[1]||(n[1]=gt(" Awesome ",-1)),q("button",{onClick:n[0]||(n[0]=i=>a())},"Go to Hamburg")]))}}),Xe="23420",Nr="23421",Br="1454",ae="6059",Dr="denkmaelerWMS",Ze="kiel_polygon",et="1693";let Y="light";const zr=t=>Number(t.slice(-1))%2===0,Wr=t=>t.get("features").reduce((e,a)=>zr(a.get("mmlid"))||e,!1),L=await ft("snowbox",{colorScheme:Y,startCenter:[565874,5934140],layers:[{id:Xe,visibility:!0,type:"background",name:"Basemap.de (Farbe)"},{id:Nr,type:"background",name:"Basemap.de (Grau)",maxZoom:6},{id:et,visibility:!0,hideInMenu:!0,type:"mask",name:"Stadtgrenze Hamburg"},{id:ae,type:"mask",name:"Anliegen (MML)",visibility:!1},{id:Br,type:"mask",name:"Ausgleichsflächen",styleId:"panda",visibility:!0,minZoom:5},{id:Dr,type:"mask",name:"Kulturdenkmale",visibility:!0,options:{layers:{order:"6,24,25,4,3,2,1,0",title:{6:"Denkmalbereich",24:"Mehrheit von baulichen Anlagen",25:"Sachgesamtheit",4:"Baudenkmal",3:"Gründenkmal",2:"Gewässer",1:"Baudenkmal (Fläche)",0:"Gründenkmal (Fläche)"},legend:!0}}},{id:Ze,type:"mask",name:"Kiel Polygone",visibility:!0}],layout:"standard",checkServiceAvailability:!0,featureStyles:Mr,markers:{layers:[{id:ae,defaultStyle:{stroke:"#FFFFFF",fill:"#005CA9"},hoverStyle:{stroke:"#46688E",fill:"#8BA1B8"},selectionStyle:{stroke:"#FFFFFF",fill:"#E10019"},unselectableStyle:{stroke:"#FFFFFF",fill:"#333333"},isSelectable:Wr}],clusterClickZoom:!0},locales:[{type:"de",resources:{fullscreen:{button:{label_on:"Mach groß",label_off:"Mach klein"}},gfi:{layer:{[ae]:{property:{addr:"Adresse",statu:"Status",beschr:"Beschr.",kat_text:"Kat."}}}},iconMenu:{hints:{attributions:"LMAO",fullscreen:"BEEEEEG YOSHEEEEE"}}}}],scale:{showScaleSwitcher:!0}},Qe);document.getElementById("secondMap").addEventListener("click",async()=>{const t=mt({startCenter:[573364,6028874],layers:[{id:Xe,visibility:!0,type:"background",name:"snowbox.layers.basemap"}]},Qe);t.classList.add("snowbox"),document.getElementById("secondMapContainer").appendChild(t),N(t,De({layoutTag:"TOP_RIGHT"}))});document.getElementById("secondMapClean").addEventListener("click",()=>{document.getElementById("secondMapContainer").innerText=""});N(L,ze({displayComponent:!0,layoutTag:"BOTTOM_MIDDLE"}));setTimeout(()=>{ht(L,"toast")},3e3);setTimeout(()=>{N(L,ze({displayComponent:!0,layoutTag:"BOTTOM_MIDDLE"})),de(L,"toast").addToast({text:"Sechs Sekunden",severity:"info"})},6e3);N(L,Er({loaderStyle:"BasicLoader"}));N(L,yt({searchMethods:[{queryParameters:{searchStreets:!0,searchHouseNumbers:!0},type:"mpapi",url:"https://geodienste.hamburg.de/HH_WFS_GAGES?service=WFS&request=GetFeature&version=2.0.0"}],minLength:3,waitMs:300,focusAfterSearch:!0,groupProperties:{defaultGroup:{limitResults:5}}}));N(L,bt({coordinateSources:[{plugin:"addressSearch",key:"chosenAddress"}],boundary:{layerId:et},movable:"drag",style:{fill:"#FF0019"},toZoomLevel:7}));N(L,kt({url:"https://geodienste.hamburg.de/HH_WPS",coordinateSources:[{plugin:"pins",key:"coordinate"}],addressTarget:{plugin:"addressSearch",key:"selectResult"},zoomTo:7}));N(L,xt({displayComponent:!0,layoutTag:"TOP_RIGHT",initiallyOpen:"layerChooser",focusMenus:[{plugin:{component:Rr,id:"attributions",locales:[]},icon:"kern-icon--near-me"}],menus:[[{plugin:De({})},{plugin:wt({})}],[{plugin:qn({layers:{[ae]:{window:!0,properties:["addr","statu","beschr","pic","kat_text","skat_text"],exportProperty:"pic",showTooltip:t=>[["span",`Coordinates: ${t.getGeometry().getCoordinates().join(", ")}`]]},[Ze]:{window:!0}},afterLoadFunction:t=>(Object.values(t).forEach(e=>{e.forEach(a=>{a.properties&&(a.properties={addr:[a.properties.str,a.properties.hsnr].join(" "),...a.properties})})}),t),featureList:{activeLayers:{plugin:"layerChooser",key:"activeMaskIds"},mode:"visible",bindWithCoreHoverSelect:!1,pageLength:5,text:{title:t=>t.get("str")+" "+t.get("hsnr"),subtitle:"Michels Meldung",subSubtitle:t=>t.get("skat_text")}},multiSelect:"box",directSelect:!0})}],[{plugin:{component:Tr,id:"realKewl",locales:[]},icon:"kern-icon-fill--share"}],[{plugin:ga({checkLocationInitially:!1,keepCentered:!1,showTooltip:!0,zoomLevel:7})}]]}));N(L,qt({leftEntries:[{id:"mockPointer",component:jr}],rightEntries:[It({}),{id:"mockAttributions",component:Ar}]}));const tt=de(L,"toast");tt.addToast({text:"Hallo Welt",severity:"info"});tt.addToast({text:"Achtung! Dies ist ein Toast!",severity:"error"});const at=de(L,"loadingIndicator");at.addLoadingKey("loadingTest");setTimeout(()=>at.removeLoadingKey("loadingTest"),2e3);vt(L,"core","selectedCoordinates",t=>document.getElementById("selected-feature-coordinates").innerText=JSON.stringify(t));document.getElementById("language-switcher").addEventListener("change",t=>{const e=t.target,{value:a}=e;Be(L,"core","language",a),e[0].innerHTML=a==="en"?"English":"Englisch",e[1].innerHTML=a==="en"?"German":"Deutsch"});document.getElementById("color-scheme-switcher").addEventListener("click",({target:t})=>{t.innerHTML=`Switch to ${Y} mode`,Y=Y==="light"?"dark":"light",Be(L,"core","colorScheme",Y)});function Hr(){const t=document.getElementById("snowbox"),e=de(t,"core"),a=e.activePluginIds;window.map=t,window.olMap=e.map,window.coreStore=e,window.activePluginIds=a;for(const r of a)window[`${r}Store`]=e.getPluginStore(r)}setTimeout(()=>{Hr(),console.info("POLAR debug assistant was successfully initialized")},7e3);
