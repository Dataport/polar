const m={PROPERTYCHANGE:"propertychange"},L={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class A{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function x(r,t,n){let e,s;n=n||g;let i=0,o=r.length,l=!1;for(;i<o;)e=i+(o-i>>1),s=+n(r[e],t),s<0?i=e+1:(o=e,l=!s);return l?i:~i}function g(r,t){return r>t?1:r<t?-1:0}function k(r,t){return r<t?1:r>t?-1:0}function b(r,t,n){if(r[0]<=t)return 0;const e=r.length;if(t<=r[e-1])return e-1;if(typeof n=="function"){for(let s=1;s<e;++s){const i=r[s];if(i===t)return s;if(i<t)return n(t,r[s-1],i)>0?s-1:s}return e-1}if(n>0){for(let s=1;s<e;++s)if(r[s]<t)return s-1;return e-1}if(n<0){for(let s=1;s<e;++s)if(r[s]<=t)return s;return e-1}for(let s=1;s<e;++s){if(r[s]==t)return s;if(r[s]<t)return r[s-1]-t<t-r[s]?s-1:s}return e-1}function N(r,t,n){for(;t<n;){const e=r[t];r[t]=r[n],r[n]=e,++t,--n}}function T(r,t){const n=Array.isArray(t)?t:[t],e=n.length;for(let s=0;s<e;s++)r[r.length]=n[s]}function P(r,t){const n=r.length;if(n!==t.length)return!1;for(let e=0;e<n;e++)if(r[e]!==t[e])return!1;return!0}function H(r,t){const n=r.length,e=Array(r.length);let s;for(s=0;s<n;s++)e[s]={index:s,value:r[s]};for(e.sort(function(i,o){return t(i.value,o.value)||i.index-o.index}),s=0;s<r.length;s++)r[s]=e[s].value}function S(r,t,n){const e=t||g;return r.every(function(s,i){if(i===0)return!0;const o=e(r[i-1],s);return!(o>0||o===0)})}function j(){return!0}function K(){return!1}function f(){}function D(r){let t,n,e;return function(){const s=Array.prototype.slice.call(arguments);return(!n||this!==e||!P(s,n))&&(e=this,n=s,t=r.apply(this,arguments)),t}}function G(r){function t(){let n;try{n=r()}catch(e){return Promise.reject(e)}return n instanceof Promise?n:Promise.resolve(n)}return t()}function _(r){for(const t in r)delete r[t]}function R(r){let t;for(t in r)return!1;return!t}class y{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class O extends A{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,n){if(!t||!n)return;const e=this.listeners_||(this.listeners_={}),s=e[t]||(e[t]=[]);s.includes(n)||s.push(n)}dispatchEvent(t){const n=typeof t=="string",e=n?t:t.type,s=this.listeners_&&this.listeners_[e];if(!s)return;const i=n?new y(t):t;i.target||(i.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});e in o||(o[e]=0,l[e]=0),++o[e];let h;for(let u=0,E=s.length;u<E;++u)if("handleEvent"in s[u]?h=s[u].handleEvent(i):h=s[u].call(this,i),h===!1||i.propagationStopped){h=!1;break}if(--o[e]===0){let u=l[e];for(delete l[e];u--;)this.removeEventListener(e,f);delete o[e]}return h}disposeInternal(){this.listeners_&&_(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,n){if(!this.listeners_)return;const e=this.listeners_[t];if(!e)return;const s=e.indexOf(n);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(e[s]=f,++this.pendingRemovals_[t]):(e.splice(s,1),e.length===0&&delete this.listeners_[t]))}}function c(r,t,n,e,s){if(s){const o=n;n=function(l){return r.removeEventListener(t,n),o.call(e??this,l)}}else e&&e!==r&&(n=n.bind(e));const i={target:r,type:t,listener:n};return r.addEventListener(t,n),i}function p(r,t,n,e){return c(r,t,n,e,!0)}function v(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),_(r))}class a extends O{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(L.CHANGE)}getRevision(){return this.revision_}onInternal(t,n){if(Array.isArray(t)){const e=t.length,s=new Array(e);for(let i=0;i<e;++i)s[i]=c(this,t[i],n);return s}return c(this,t,n)}onceInternal(t,n){let e;if(Array.isArray(t)){const s=t.length;e=new Array(s);for(let i=0;i<s;++i)e[i]=p(this,t[i],n)}else e=p(this,t,n);return n.ol_key=e,e}unInternal(t,n){const e=n.ol_key;if(e)w(e);else if(Array.isArray(t))for(let s=0,i=t.length;s<i;++s)this.removeEventListener(t[s],n);else this.removeEventListener(t,n)}}a.prototype.on;a.prototype.once;a.prototype.un;function w(r){if(Array.isArray(r))for(let t=0,n=r.length;t<n;++t)v(r[t]);else v(r)}function U(){throw new Error("Unimplemented abstract method.")}let C=0;function I(r){return r.ol_uid||(r.ol_uid=String(++C))}class d extends y{constructor(t,n,e){super(t),this.key=n,this.oldValue=e}}class Y extends a{constructor(t){super(),this.on,this.once,this.un,I(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let e;e=`change:${t}`,this.hasListener(e)&&this.dispatchEvent(new d(e,t,n)),e=m.PROPERTYCHANGE,this.hasListener(e)&&this.dispatchEvent(new d(e,t,n))}addChangeListener(t,n){this.addEventListener(`change:${t}`,n)}removeChangeListener(t,n){this.removeEventListener(`change:${t}`,n)}set(t,n,e){const s=this.values_||(this.values_={});if(e)s[t]=n;else{const i=s[t];s[t]=n,i!==n&&this.notify(t,i)}}setProperties(t,n){for(const e in t)this.set(e,t[e],n)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,n){if(this.values_&&t in this.values_){const e=this.values_[t];delete this.values_[t],R(this.values_)&&(this.values_=null),n||this.notify(t,e)}}}function $(r,t){if(!r)throw new Error(t)}export{P as A,K as B,x as C,j as D,y as E,$ as F,G,D as H,k as I,T as K,L,H as N,A as O,R as P,O as R,b as S,U,Y as V,g as _,a,N as b,c,p as d,f,_ as g,S as j,v as p,w,I as x,m as y};
