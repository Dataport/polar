import{V as Dt,x as Lt,U as g,R as ct,L as w,G as St,d as tt,p as Ct,F as xt,g as Ot}from"./asserts-C1UfHExR-pcJD3tIw.js";function _(e,t,i){return Math.min(Math.max(e,t),i)}function Qt(e,t,i,s,n,r){const o=n-i,a=r-s;if(o!==0||a!==0){const l=((e-i)*o+(t-s)*a)/(o*o+a*a);l>1?(i=n,s=r):l>0&&(i+=o*l,s+=a*l)}return Mt(e,t,i,s)}function Mt(e,t,i,s){const n=i-e,r=s-t;return n*n+r*r}function Ut(e){const t=e.length;for(let s=0;s<t;s++){let n=s,r=Math.abs(e[s][s]);for(let a=s+1;a<t;a++){const l=Math.abs(e[a][s]);l>r&&(r=l,n=a)}if(r===0)return null;const o=e[n];e[n]=e[s],e[s]=o;for(let a=s+1;a<t;a++){const l=-e[a][s]/e[s][s];for(let h=s;h<t+1;h++)s==h?e[a][h]=0:e[a][h]+=l*e[s][h]}}const i=new Array(t);for(let s=t-1;s>=0;s--){i[s]=e[s][t]/e[s][s];for(let n=s-1;n>=0;n--)e[n][t]-=e[n][s]*i[s]}return i}function Xt(e){return e*180/Math.PI}function te(e){return e*Math.PI/180}function ee(e,t){const i=e%t;return i*t<0?i+t:i}function ie(e,t,i){return e+i*(t-e)}function z(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}function se(e,t){return Math.round(z(e,t))}function ne(e,t){return Math.floor(z(e,t))}function re(e,t){return Math.ceil(z(e,t))}function ae(e,t,i){if(e>=t&&e<i)return e;const s=i-t;return((e-t)%s+s)%s+t}const y=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Rt=y.includes("safari")&&!y.includes("chrom"),oe=Rt&&(y.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(y)),le=y.includes("webkit")&&!y.includes("edge"),he=y.includes("macintosh"),ce=typeof devicePixelRatio<"u"?devicePixelRatio:1,q=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Z=typeof Image<"u"&&Image.prototype.decode,ut=typeof createImageBitmap=="function",ue=(function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e})(),c={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function m(e,t,i,s){let n;return i&&i.length?n=i.shift():q?n=new class extends OffscreenCanvas{style={}}(e??300,t??150):n=document.createElement("canvas"),e&&(n.width=e),t&&(n.height=t),n.getContext("2d",s)}let b;function et(){return b||(b=m(1,1)),b}function ge(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function de(e){let t=e.offsetWidth;const i=getComputedStyle(e);return t+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),t}function fe(e){let t=e.offsetHeight;const i=getComputedStyle(e);return t+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),t}function me(e,t){const i=t.parentNode;i&&i.replaceChild(e,t)}function _e(e){for(;e.lastChild;)e.lastChild.remove()}function pe(e,t){const i=e.childNodes;for(let s=0;;++s){const n=i[s],r=t[s];if(!n&&!r)break;if(n!==r){if(!n){e.appendChild(r);continue}if(!r){e.removeChild(n),--s;continue}e.insertBefore(r,n)}}}function ye(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const i=this.childNodes.indexOf(t);if(i===-1)throw new Error("Reference node not found");return this.childNodes.splice(i,0,e),e},style:{}},{get(e,t,i){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,i)}})}function ve(e){return typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas}const At=[NaN,NaN,NaN,0];let N;function Et(){return N||(N=m(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),N}const zt=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,kt=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Pt=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,bt=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function E(e,t){return e.endsWith("%")?Number(e.substring(0,e.length-1))/t:Number(e)}function R(e){throw new Error('failed to parse "'+e+'" as color')}function gt(e){if(e.toLowerCase().startsWith("rgb")){const r=e.match(kt)||e.match(zt)||e.match(Pt);if(r){const o=r[4],a=100/255;return[_(E(r[1],a)+.5|0,0,255),_(E(r[2],a)+.5|0,0,255),_(E(r[3],a)+.5|0,0,255),o!==void 0?_(E(o,100),0,1):1]}R(e)}if(e.startsWith("#")){if(bt.test(e)){const r=e.substring(1),o=r.length<=4?1:2,a=[0,0,0,255];for(let l=0,h=r.length;l<h;l+=o){let u=parseInt(r.substring(l,l+o),16);o===1&&(u+=u<<4),a[l/o]=u}return a[3]=a[3]/255,a}R(e)}const t=Et();t.fillStyle="#abcdef";let i=t.fillStyle;t.fillStyle=e,t.fillStyle===i&&(t.fillStyle="#fedcba",i=t.fillStyle,t.fillStyle=e,t.fillStyle===i&&R(e));const s=t.fillStyle;if(s.startsWith("#")||s.startsWith("rgba"))return gt(s);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const n=Array.from(t.getImageData(0,0,1,1).data);return n[3]=z(n[3]/255,3),n}function Nt(e){return typeof e=="string"?e:dt(e)}const Wt=1024,C={};let W=0;function we(e){if(e.length===4)return e;const t=e.slice();return t[3]=1,t}function H(e){return e>.0031308?Math.pow(e,1/2.4)*269.025-14.025:e*3294.6}function G(e){return e>.2068965?Math.pow(e,3):(e-4/29)*(108/841)}function $(e){return e>10.314724?Math.pow((e+14.025)/269.025,2.4):e/3294.6}function F(e){return e>.0088564?Math.pow(e,1/3):e/(108/841)+4/29}function Ie(e){const t=$(e[0]),i=$(e[1]),s=$(e[2]),n=F(t*.222488403+i*.716873169+s*.06060791),r=500*(F(t*.452247074+i*.399439023+s*.148375274)-n),o=200*(n-F(t*.016863605+i*.117638439+s*.865350722)),a=Math.atan2(o,r)*(180/Math.PI);return[116*n-16,Math.sqrt(r*r+o*o),a<0?a+360:a,e[3]]}function De(e){const t=(e[0]+16)/116,i=e[1],s=e[2]*Math.PI/180,n=G(t),r=G(t+i/500*Math.cos(s)),o=G(t-i/200*Math.sin(s)),a=H(r*3.021973625-n*1.617392459-o*.404875592),l=H(r*-.943766287+n*1.916279586+o*.027607165),h=H(r*.069407491-n*.22898585+o*1.159737864);return[_(a+.5|0,0,255),_(l+.5|0,0,255),_(h+.5|0,0,255),e[3]]}function Ht(e){if(e==="none")return At;if(C.hasOwnProperty(e))return C[e];if(W>=Wt){let i=0;for(const s in C)(i++&3)===0&&(delete C[s],--W)}const t=gt(e);t.length!==4&&R(e);for(const i of t)isNaN(i)&&R(e);return C[e]=t,++W,t}function K(e){return Array.isArray(e)?e:Ht(e)}function dt(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let i=e[1];i!=(i|0)&&(i=i+.5|0);let s=e[2];s!=(s|0)&&(s=s+.5|0);const n=e[3]===void 0?1:Math.round(e[3]*1e3)/1e3;return"rgba("+t+","+i+","+s+","+n+")"}class Le extends ct{constructor(t,i,s,n){super(),this.extent=t,this.pixelRatio_=s,this.resolution=i,this.state=typeof n=="function"?c.IDLE:n,this.image_=null,this.loader=typeof n=="function"?n:null}changed(){this.dispatchEvent(w.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==c.IDLE&&this.loader){this.state=c.LOADING,this.changed();const t=this.getResolution(),i=Array.isArray(t)?t[0]:t;St(()=>this.loader(this.getExtent(),i,this.getPixelRatio())).then(s=>{"image"in s&&(this.image_=s.image),"extent"in s&&(this.extent=s.extent),"resolution"in s&&(this.resolution=s.resolution),"pixelRatio"in s&&(this.pixelRatio_=s.pixelRatio),(s instanceof HTMLImageElement||ut&&s instanceof ImageBitmap||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement)&&(this.image_=s),this.state=c.LOADED}).catch(s=>{this.state=c.ERROR,console.error(s)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function Se(e,t,i){const s=e;let n=!0,r=!1,o=!1;const a=[tt(s,w.LOAD,function(){o=!0,r||t()})];return s.src&&Z?(r=!0,s.decode().then(function(){n&&t()}).catch(function(l){n&&(o?t():i())})):a.push(tt(s,w.ERROR,i)),function(){n=!1,a.forEach(Ct)}}function Gt(e,t){return new Promise((i,s)=>{function n(){o(),i(e)}function r(){o(),s(new Error("Image load error"))}function o(){e.removeEventListener("load",n),e.removeEventListener("error",r)}e.addEventListener("load",n),e.addEventListener("error",r)})}function ft(e,t){return t&&(e.src=t),e.src&&Z?new Promise((i,s)=>e.decode().then(()=>i(e)).catch(n=>e.complete&&e.width?i(e):s(n))):Gt(e)}function Ce(e,t){return t&&(e.src=t),e.src&&Z&&ut?e.decode().then(()=>createImageBitmap(e)).catch(i=>{if(e.complete&&e.width)return e;throw i}):ft(e)}class $t{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const i in this.cache_){const s=this.cache_[i];(t++&3)===0&&!s.hasListener()&&(delete this.cache_[i],delete this.patternCache_[i],--this.cacheSize_)}}}get(t,i){const s=V(t,i);return s in this.cache_?this.cache_[s]:null}getPattern(t,i){const s=V(t,i);return s in this.patternCache_?this.patternCache_[s]:null}set(t,i,s,n){const r=V(t,i),o=r in this.cache_;this.cache_[r]=s,n&&(s.getImageState()===c.IDLE&&s.load(),s.getImageState()===c.LOADING?s.ready().then(()=>{this.patternCache_[r]=et().createPattern(s.getImage(1),"repeat")}):this.patternCache_[r]=et().createPattern(s.getImage(1),"repeat")),o||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function V(e,t){const i=t?K(t):"null";return e+":"+i}const d=new $t;let x=null;class mt extends ct{constructor(t,i,s,n,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=s?.crossOrigin,this.referrerPolicy_=s?.referrerPolicy,this.canvas_={},this.color_=r,this.imageState_=n===void 0?c.IDLE:n,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=i,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_),this.referrerPolicy_!==void 0&&(this.image_.referrerPolicy=this.referrerPolicy_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===c.LOADED){x||(x=m(1,1,void 0,{willReadFrequently:!0})),x.drawImage(this.image_,0,0);try{x.getImageData(0,0,1,1),this.tainted_=!1}catch{x=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(w.CHANGE)}handleImageError_(){this.imageState_=c.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=c.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}setImage(t){this.image_=t}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],i=this.size_[1],s=m(t,i);s.fillRect(0,0,t,i),this.hitDetectionImage_=s.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===c.IDLE){this.image_||this.initializeImage_(),this.imageState_=c.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&ft(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==c.LOADED)return;const i=this.image_,s=m(Math.ceil(i.width*t),Math.ceil(i.height*t)),n=s.canvas;s.scale(t,t),s.drawImage(i,0,0),s.globalCompositeOperation="multiply",s.fillStyle=Nt(this.color_),s.fillRect(0,0,n.width/t,n.height/t),s.globalCompositeOperation="destination-in",s.drawImage(i,0,0),this.canvas_[t]=n}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===c.LOADED||this.imageState_===c.ERROR)t();else{const i=()=>{(this.imageState_===c.LOADED||this.imageState_===c.ERROR)&&(this.removeEventListener(w.CHANGE,i),t())};this.addEventListener(w.CHANGE,i)}})),this.ready_}}function _t(e,t,i,s,n,r){let o=t===void 0?void 0:d.get(t,n);return o||(o=new mt(e,e&&"src"in e?e.src||void 0:t,i,s,n),d.set(t,n,o,r)),r&&o&&!d.getPattern(t,n)&&d.set(t,n,o,r),o}function it(e){return e?Array.isArray(e)?dt(e):typeof e=="object"&&"src"in e?Ft(e):e:null}function Ft(e){if(!e.offset||!e.size)return d.getPattern(e.src,e.color);const t=e.src+":"+e.offset,i=d.getPattern(t,e.color);if(i)return i;const s=d.get(e.src,null);if(s.getImageState()!==c.LOADED)return null;const n=m(e.size[0],e.size[1]);return n.drawImage(s.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),_t(n.canvas,t,void 0,c.LOADED,e.color,!0),d.getPattern(t,e.color)}const xe="ol-hidden",Oe="ol-selectable",Me="ol-unselectable",Re="ol-control",Ae="ol-collapsed",Vt=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),st=["style","variant","weight","size","lineHeight","family"],J={normal:400,bold:700},j=function(e){const t=e.match(Vt);if(!t)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let s=0,n=st.length;s<n;++s){const r=t[s+1];r!==void 0&&(i[st[s]]=typeof r=="string"?r.trim():r)}return isNaN(Number(i.weight))&&i.weight in J&&(i.weight=J[i.weight]),i.families=i.family.split(/,\s?/).map(s=>s.trim().replace(/^['"]|['"]$/g,"")),i},Ee="10px sans-serif",nt="#000",rt="round",ze=[],ke=0,at="round",Tt=10,Pe=0,Jt="#000",be="center",Ne="middle",We=[0,0,0,0],jt=1,O=new Dt;let M=null,ot;const B={},Bt=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function qt(e,t,i){return`${e} ${t} 16px "${i}"`}const He=(function(){let e,t;async function i(n){await t.ready;const r=await t.load(n);if(r.length===0)return!1;const o=j(n),a=o.families[0].toLowerCase(),l=o.weight;return r.some(h=>{const u=h.family.replace(/^['"]|['"]$/g,"").toLowerCase(),f=J[h.weight]||h.weight;return u===a&&h.style===o.style&&f==l})}async function s(){await t.ready;let n=!0;const r=O.getProperties(),o=Object.keys(r).filter(a=>r[a]<100);for(let a=o.length-1;a>=0;--a){const l=o[a];let h=r[l];h<100&&(await i(l)?(Ot(B),O.set(l,100)):(h+=10,O.set(l,h,!0),h<100&&(n=!1)))}e=void 0,n||(e=setTimeout(s,100))}return async function(n){t||(t=q?self.fonts:document.fonts);const r=j(n);if(!r)return;const o=r.families;let a=!1;for(const l of o){if(Bt.has(l))continue;const h=qt(r.style,r.weight,l);O.get(h)===void 0&&(O.set(h,0,!0),a=!0)}a&&(clearTimeout(e),e=setTimeout(s,100))}})(),Zt=(function(){let e;return function(t){let i=B[t];if(i==null){if(q){const s=j(t),n=pt(t,"Å½g");i=(isNaN(Number(s.lineHeight))?1.2:Number(s.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),i=e.offsetHeight,document.body.removeChild(e);B[t]=i}return i}})();function pt(e,t){return M||(M=m(1,1)),e!=ot&&(M.font=e,ot=M.font),M.measureText(t)}function yt(e,t){return pt(e,t).width}function Ge(e,t,i){if(t in i)return i[t];const s=t.split(`
`).reduce((n,r)=>Math.max(n,yt(e,r)),0);return i[t]=s,s}function $e(e,t){const i=[],s=[],n=[];let r=0,o=0,a=0,l=0;for(let h=0,u=t.length;h<=u;h+=2){const f=t[h];if(f===`
`||h===u){r=Math.max(r,o),n.push(o),o=0,a+=l,l=0;continue}const v=t[h+1]||e.font,D=yt(v,f);i.push(D),o+=D;const L=Zt(v);s.push(L),l=Math.max(l,L)}return{width:r,height:a,widths:i,heights:s,lineWidths:n}}function Fe(e,t,i,s,n,r,o,a,l,h,u){e.save(),i!==1&&(e.globalAlpha===void 0?e.globalAlpha=f=>f.globalAlpha*=i:e.globalAlpha*=i),t&&e.transform.apply(e,t),s.contextInstructions?(e.translate(l,h),e.scale(u[0],u[1]),Kt(s,e)):u[0]<0||u[1]<0?(e.translate(l,h),e.scale(u[0],u[1]),e.drawImage(s,n,r,o,a,0,0,o,a)):e.drawImage(s,n,r,o,a,l,h,o*u[0],a*u[1]),e.restore()}function Kt(e,t){const i=e.contextInstructions;for(let s=0,n=i.length;s<n;s+=2)Array.isArray(i[s+1])?t[i[s]].apply(t,i[s+1]):t[i[s]]=i[s+1]}class A{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new A({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const i=_t(null,t.src,{crossOrigin:"anonymous"},void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));i.ready().then(()=>{this.patternImage_=null}),i.getImageState()===c.IDLE&&i.load(),i.getImageState()===c.LOADING&&(this.patternImage_=i)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?Lt(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:K(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class I{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.offset_=t.offset,this.width_=t.width}clone(){const t=this.getColor();return new I({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),offset:this.getOffset(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getOffset(){return this.offset_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setOffset(t){this.offset_=t}setWidth(t){this.width_=t}}function Ve(e){return e[0]>0&&e[1]>0}function Te(e,t,i){return i===void 0&&(i=[0,0]),i[0]=e[0]*t+.5|0,i[1]=e[1]*t+.5|0,i}function lt(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}class Y{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=lt(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Y({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return g()}getImage(t){return g()}getHitDetectionImage(){return g()}getPixelRatio(t){return 1}getImageState(){return g()}getImageSize(){return g()}getOrigin(){return g()}getSize(){return g()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=lt(t)}listenImageChange(t){g()}load(){g()}unlistenImageChange(t){g()}ready(){return Promise.resolve()}}class Q extends Y{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?c.LOADING:c.LOADED,this.imageState_===c.LOADING&&this.ready().then(()=>this.imageState_=c.LOADED),this.render()}clone(){const t=this.getScale(),i=new Q({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}getAnchor(){const t=this.size_,i=this.getDisplacement(),s=this.getScaleArray();return[t[0]/2-i[0]/s[0],t[1]/2+i[1]/s[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){const i=this.fill_?.getKey(),s=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${i}`+Object.values(this.renderOptions_).join(",");let n=d.get(s,null)?.getImage(1);if(!n){const r=this.renderOptions_,o=Math.ceil(r.size*t),a=m(o,o);this.draw_(r,a,t),n=a.canvas;const l=new mt(n,void 0,null,c.LOADED,null);d.set(s,null,l),createImageBitmap(n).then(h=>{l.setImage(h)})}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}setRadius(t){this.radius!==t&&(this.radius=t,this.render())}getRadius2(){return this.radius2_}setRadius2(t){this.radius2_!==t&&(this.radius2_=t,this.render())}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,i,s){if(i===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return i;let n=this.radius,r=this.radius2_===void 0?n:this.radius2_;if(n<r){const P=n;n=r,r=P}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),h=Math.sqrt(r*r-l*l),u=n-h,f=Math.sqrt(l*l+u*u),v=f/l;if(t==="miter"&&v<=s)return v*i;const D=i/2/v,L=i/2*(u/f),k=Math.sqrt((n+D)*(n+D)+L*L)-n;if(this.radius2_===void 0||t==="bevel")return k*2;const S=n*Math.sin(a),It=Math.sqrt(n*n-S*S),U=r-It,X=Math.sqrt(S*S+U*U)/S;if(X<=s){const P=X*i/2-r-n;return 2*Math.max(k,P)}return k*2}createRenderOptions(){let t=rt,i=at,s=0,n=null,r=0,o,a=0;this.stroke_&&(o=it(this.stroke_.getColor()??Jt),a=this.stroke_.getWidth()??jt,n=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset()??0,i=this.stroke_.getLineJoin()??at,t=this.stroke_.getLineCap()??rt,s=this.stroke_.getMiterLimit()??Tt);const l=this.calculateLineJoinSize_(i,a,s),h=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*h+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:t,lineDash:n,lineDashOffset:r,lineJoin:i,miterLimit:s}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,i,s){if(i.scale(s,s),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){let n=this.fill_.getColor();n===null&&(n=nt),i.fillStyle=it(n),i.fill()}t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineCap=t.lineCap,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}createHitDetectionCanvas_(t){let i;if(this.fill_){let s=this.fill_.getColor(),n=0;typeof s=="string"&&(s=K(s)),s===null?n=1:Array.isArray(s)&&(n=s.length===4?s[3]:1),n===0&&(i=m(t.size,t.size),this.drawHitDetectionCanvas_(t,i))}return i?i.canvas:this.getImage(1)}createPath_(t){let i=this.points_;const s=this.radius;if(i===1/0)t.arc(0,0,s,0,2*Math.PI);else{const n=this.radius2_===void 0?s:this.radius2_;this.radius2_!==void 0&&(i*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/i;for(let a=0;a<i;a++){const l=r+a*o,h=a%2===0?s:n;t.lineTo(h*Math.cos(l),h*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=nt,i.fill(),t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}let vt=class wt extends Q{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),i=new wt({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}};class p{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=ht,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new p({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(i){return i.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=ht,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Je(e){let t;if(typeof e=="function")t=e;else{let i;Array.isArray(e)?i=e:(xt(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),i=[e]),t=function(){return i}}return t}let T=null;function je(e,t){if(!T){const i=new A({color:"rgba(255,255,255,0.4)"}),s=new I({color:"#3399CC",width:1.25});T=[new p({image:new vt({fill:i,stroke:s,radius:5}),fill:i,stroke:s})]}return T}function Be(){const e={},t=[255,255,255,1],i=[0,153,255,1],s=3;return e.Polygon=[new p({fill:new A({color:[255,255,255,.5]})})],e.MultiPolygon=e.Polygon,e.LineString=[new p({stroke:new I({color:t,width:s+2})}),new p({stroke:new I({color:i,width:s})})],e.MultiLineString=e.LineString,e.Circle=e.Polygon.concat(e.LineString),e.Point=[new p({image:new vt({radius:s*2,fill:new A({color:i}),stroke:new I({color:t,width:s/2})}),zIndex:1/0})],e.MultiPoint=e.Point,e.GeometryCollection=e.Polygon.concat(e.LineString,e.Point),e}function ht(e){return e.getGeometry()}export{Jt as $,Se as A,Tt as B,p as C,Fe as D,At as E,be as F,Ge as G,He as H,vt as I,jt as J,q as K,dt as L,we as M,Pe as N,Ie as O,z as P,De as Q,oe as R,I as S,We as T,Y as U,$e as V,Ht as W,Q as X,Qt as Y,K as Z,m as _,lt as a,O as a0,he as a1,le as a2,Oe as a3,_e as a4,de as a5,fe as a6,Le as a7,re as a8,Te as a9,ne as aa,ce as ab,ue as ac,Ve as ad,Me as ae,pe as af,se as ag,Ce as ah,xe as ai,Re as aj,Ae as ak,me as al,d as am,Be as an,ve as b,et as c,je as d,Ut as e,it as f,ge as g,at as h,te as i,Ne as j,A as k,Ee as l,_t as m,ee as n,ae as o,nt as p,Je as q,rt as r,ie as s,Xt as t,c as u,Mt as v,ye as w,ze as x,_ as y,ke as z};
