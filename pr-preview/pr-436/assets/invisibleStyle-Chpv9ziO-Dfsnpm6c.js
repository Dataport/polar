import{V as Ct,x as xt,U as g,R as ut,L as w,G as Ot,d as et,p as Mt,F as Rt,g as At}from"./asserts-BSy1ujn8-CTfb8-hw.js";function p(e,t,i){return Math.min(Math.max(e,t),i)}function ie(e,t,i,s,n,r){const a=n-i,o=r-s;if(a!==0||o!==0){const l=((e-i)*a+(t-s)*o)/(a*a+o*o);l>1?(i=n,s=r):l>0&&(i+=a*l,s+=o*l)}return Et(e,t,i,s)}function Et(e,t,i,s){const n=i-e,r=s-t;return n*n+r*r}function se(e){const t=e.length;for(let s=0;s<t;s++){let n=s,r=Math.abs(e[s][s]);for(let o=s+1;o<t;o++){const l=Math.abs(e[o][s]);l>r&&(r=l,n=o)}if(r===0)return null;const a=e[n];e[n]=e[s],e[s]=a;for(let o=s+1;o<t;o++){const l=-e[o][s]/e[s][s];for(let h=s;h<t+1;h++)s==h?e[o][h]=0:e[o][h]+=l*e[s][h]}}const i=new Array(t);for(let s=t-1;s>=0;s--){i[s]=e[s][t]/e[s][s];for(let n=s-1;n>=0;n--)e[n][t]-=e[n][s]*i[s]}return i}function ne(e){return e*180/Math.PI}function re(e){return e*Math.PI/180}function ae(e,t){const i=e%t;return i*t<0?i+t:i}function oe(e,t,i){return e+i*(t-e)}function z(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}function le(e,t){return Math.round(z(e,t))}function he(e,t){return Math.floor(z(e,t))}function ce(e,t){return Math.ceil(z(e,t))}function ue(e,t,i){if(e>=t&&e<i)return e;const s=i-t;return((e-t)%s+s)%s+t}const y=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",zt=y.includes("safari")&&!y.includes("chrom"),ge=zt&&(y.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(y)),de=y.includes("webkit")&&!y.includes("edge"),fe=y.includes("macintosh"),me=typeof devicePixelRatio<"u"?devicePixelRatio:1,K=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Z=typeof Image<"u"&&Image.prototype.decode,gt=typeof createImageBitmap=="function",_e=(function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e})(),c={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function m(e,t,i,s){let n;return i&&i.length?n=i.shift():K?n=new class extends OffscreenCanvas{style={}}(e??300,t??150):n=document.createElement("canvas"),e&&(n.width=e),t&&(n.height=t),n.getContext("2d",s)}let N;function it(){return N||(N=m(1,1)),N}function pe(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function ye(e){let t=e.offsetWidth;const i=getComputedStyle(e);return t+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),t}function ve(e){let t=e.offsetHeight;const i=getComputedStyle(e);return t+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),t}function we(e,t){const i=t.parentNode;i&&i.replaceChild(e,t)}function Ie(e){for(;e.lastChild;)e.lastChild.remove()}function De(e,t){const i=e.childNodes;for(let s=0;;++s){const n=i[s],r=t[s];if(!n&&!r)break;if(n!==r){if(!n){e.appendChild(r);continue}if(!r){e.removeChild(n),--s;continue}e.insertBefore(r,n)}}}function Se(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const i=this.childNodes.indexOf(t);if(i===-1)throw new Error("Reference node not found");return this.childNodes.splice(i,0,e),e},style:{}},{get(e,t,i){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,i)}})}function Le(e){return typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas}const bt=[NaN,NaN,NaN,0];let W;function kt(){return W||(W=m(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),W}const Pt=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Nt=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Wt=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,$t=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function E(e,t){return e.endsWith("%")?Number(e.substring(0,e.length-1))/t:Number(e)}function R(e){throw new Error('failed to parse "'+e+'" as color')}function dt(e){if(e.toLowerCase().startsWith("rgb")){const r=e.match(Nt)||e.match(Pt)||e.match(Wt);if(r){const a=r[4],o=100/255;return[p(E(r[1],o)+.5|0,0,255),p(E(r[2],o)+.5|0,0,255),p(E(r[3],o)+.5|0,0,255),a!==void 0?p(E(a,100),0,1):1]}R(e)}if(e.startsWith("#")){if($t.test(e)){const r=e.substring(1),a=r.length<=4?1:2,o=[0,0,0,255];for(let l=0,h=r.length;l<h;l+=a){let u=parseInt(r.substring(l,l+a),16);a===1&&(u+=u<<4),o[l/a]=u}return o[3]=o[3]/255,o}R(e)}const t=kt();t.fillStyle="#abcdef";let i=t.fillStyle;t.fillStyle=e,t.fillStyle===i&&(t.fillStyle="#fedcba",i=t.fillStyle,t.fillStyle=e,t.fillStyle===i&&R(e));const s=t.fillStyle;if(s.startsWith("#")||s.startsWith("rgba"))return dt(s);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const n=Array.from(t.getImageData(0,0,1,1).data);return n[3]=z(n[3]/255,3),n}function Ht(e){return typeof e=="string"?e:ft(e)}const Ft=1024,C={};let $=0;function Ce(e){if(e.length===4)return e;const t=e.slice();return t[3]=1,t}function H(e){return e>.0031308?Math.pow(e,1/2.4)*269.025-14.025:e*3294.6}function F(e){return e>.2068965?Math.pow(e,3):(e-4/29)*(108/841)}function G(e){return e>10.314724?Math.pow((e+14.025)/269.025,2.4):e/3294.6}function V(e){return e>.0088564?Math.pow(e,1/3):e/(108/841)+4/29}function xe(e){const t=G(e[0]),i=G(e[1]),s=G(e[2]),n=V(t*.222488403+i*.716873169+s*.06060791),r=500*(V(t*.452247074+i*.399439023+s*.148375274)-n),a=200*(n-V(t*.016863605+i*.117638439+s*.865350722)),o=Math.atan2(a,r)*(180/Math.PI);return[116*n-16,Math.sqrt(r*r+a*a),o<0?o+360:o,e[3]]}function Oe(e){const t=(e[0]+16)/116,i=e[1],s=e[2]*Math.PI/180,n=F(t),r=F(t+i/500*Math.cos(s)),a=F(t-i/200*Math.sin(s)),o=H(r*3.021973625-n*1.617392459-a*.404875592),l=H(r*-.943766287+n*1.916279586+a*.027607165),h=H(r*.069407491-n*.22898585+a*1.159737864);return[p(o+.5|0,0,255),p(l+.5|0,0,255),p(h+.5|0,0,255),e[3]]}function Gt(e){if(e==="none")return bt;if(C.hasOwnProperty(e))return C[e];if($>=Ft){let i=0;for(const s in C)(i++&3)===0&&(delete C[s],--$)}const t=dt(e);t.length!==4&&R(e);for(const i of t)isNaN(i)&&R(e);return C[e]=t,++$,t}function Y(e){return Array.isArray(e)?e:Gt(e)}function ft(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let i=e[1];i!=(i|0)&&(i=i+.5|0);let s=e[2];s!=(s|0)&&(s=s+.5|0);const n=e[3]===void 0?1:Math.round(e[3]*1e3)/1e3;return"rgba("+t+","+i+","+s+","+n+")"}class Me extends ut{constructor(t,i,s,n){super(),this.extent=t,this.pixelRatio_=s,this.resolution=i,this.state=typeof n=="function"?c.IDLE:n,this.image_=null,this.loader=typeof n=="function"?n:null}changed(){this.dispatchEvent(w.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==c.IDLE&&this.loader){this.state=c.LOADING,this.changed();const t=this.getResolution(),i=Array.isArray(t)?t[0]:t;Ot(()=>this.loader(this.getExtent(),i,this.getPixelRatio())).then(s=>{"image"in s&&(this.image_=s.image),"extent"in s&&(this.extent=s.extent),"resolution"in s&&(this.resolution=s.resolution),"pixelRatio"in s&&(this.pixelRatio_=s.pixelRatio),(s instanceof HTMLImageElement||gt&&s instanceof ImageBitmap||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement)&&(this.image_=s),this.state=c.LOADED}).catch(s=>{this.state=c.ERROR,console.error(s)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function Re(e,t,i){const s=e;let n=!0,r=!1,a=!1;const o=[et(s,w.LOAD,function(){a=!0,r||t()})];return s.src&&Z?(r=!0,s.decode().then(function(){n&&t()}).catch(function(l){n&&(a?t():i())})):o.push(et(s,w.ERROR,i)),function(){n=!1,o.forEach(Mt)}}function Vt(e,t){return new Promise((i,s)=>{function n(){a(),i(e)}function r(){a(),s(new Error("Image load error"))}function a(){e.removeEventListener("load",n),e.removeEventListener("error",r)}e.addEventListener("load",n),e.addEventListener("error",r)})}function mt(e,t){return t&&(e.src=t),e.src&&Z?new Promise((i,s)=>e.decode().then(()=>i(e)).catch(n=>e.complete&&e.width?i(e):s(n))):Vt(e)}function Ae(e,t){return t&&(e.src=t),e.src&&Z&&gt?e.decode().then(()=>createImageBitmap(e)).catch(i=>{if(e.complete&&e.width)return e;throw i}):mt(e)}class Tt{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const i in this.cache_){const s=this.cache_[i];(t++&3)===0&&!s.hasListener()&&(delete this.cache_[i],delete this.patternCache_[i],--this.cacheSize_)}}}get(t,i,s){const n=T(t,i,s);return n in this.cache_?this.cache_[n]:null}getPattern(t,i,s){const n=T(t,i,s);return n in this.patternCache_?this.patternCache_[n]:null}set(t,i,s,n,r){const a=T(t,i,s),o=a in this.cache_;this.cache_[a]=n,r&&(n.getImageState()===c.IDLE&&n.load(),n.getImageState()===c.LOADING?n.ready().then(()=>{this.patternCache_[a]=it().createPattern(n.getImage(1),"repeat")}):this.patternCache_[a]=it().createPattern(n.getImage(1),"repeat")),o||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function T(e,t,i){const s=i?Y(i):"null";return t+":"+e+":"+s}const d=new Tt;let x=null;class _t extends ut{constructor(t,i,s,n,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=s,this.canvas_={},this.color_=r,this.imageState_=n===void 0?c.IDLE:n,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=i,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===c.LOADED){x||(x=m(1,1,void 0,{willReadFrequently:!0})),x.drawImage(this.image_,0,0);try{x.getImageData(0,0,1,1),this.tainted_=!1}catch{x=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(w.CHANGE)}handleImageError_(){this.imageState_=c.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=c.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],i=this.size_[1],s=m(t,i);s.fillRect(0,0,t,i),this.hitDetectionImage_=s.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===c.IDLE){this.image_||this.initializeImage_(),this.imageState_=c.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&mt(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==c.LOADED)return;const i=this.image_,s=m(Math.ceil(i.width*t),Math.ceil(i.height*t)),n=s.canvas;s.scale(t,t),s.drawImage(i,0,0),s.globalCompositeOperation="multiply",s.fillStyle=Ht(this.color_),s.fillRect(0,0,n.width/t,n.height/t),s.globalCompositeOperation="destination-in",s.drawImage(i,0,0),this.canvas_[t]=n}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===c.LOADED||this.imageState_===c.ERROR)t();else{const i=()=>{(this.imageState_===c.LOADED||this.imageState_===c.ERROR)&&(this.removeEventListener(w.CHANGE,i),t())};this.addEventListener(w.CHANGE,i)}})),this.ready_}}function pt(e,t,i,s,n,r){let a=t===void 0?void 0:d.get(t,i,n);return a||(a=new _t(e,e&&"src"in e?e.src||void 0:t,i,s,n),d.set(t,i,n,a,r)),r&&a&&!d.getPattern(t,i,n)&&d.set(t,i,n,a,r),a}function st(e){return e?Array.isArray(e)?ft(e):typeof e=="object"&&"src"in e?Jt(e):e:null}function Jt(e){if(!e.offset||!e.size)return d.getPattern(e.src,"anonymous",e.color);const t=e.src+":"+e.offset,i=d.getPattern(t,void 0,e.color);if(i)return i;const s=d.get(e.src,"anonymous",null);if(s.getImageState()!==c.LOADED)return null;const n=m(e.size[0],e.size[1]);return n.drawImage(s.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),pt(n.canvas,t,void 0,c.LOADED,e.color,!0),d.getPattern(t,void 0,e.color)}const Ee="ol-hidden",ze="ol-selectable",be="ol-unselectable",ke="ol-control",Pe="ol-collapsed",jt=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),nt=["style","variant","weight","size","lineHeight","family"],j={normal:400,bold:700},q=function(e){const t=e.match(jt);if(!t)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let s=0,n=nt.length;s<n;++s){const r=t[s+1];r!==void 0&&(i[nt[s]]=typeof r=="string"?r.trim():r)}return isNaN(Number(i.weight))&&i.weight in j&&(i.weight=j[i.weight]),i.families=i.family.split(/,\s?/).map(s=>s.trim().replace(/^['"]|['"]$/g,"")),i},Ne="10px sans-serif",rt="#000",at="round",We=[],$e=0,ot="round",qt=10,Bt="#000",He="center",Fe="middle",Ge=[0,0,0,0],Kt=1,O=new Ct;let M=null,lt;const B={},Zt=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function Yt(e,t,i){return`${e} ${t} 16px "${i}"`}const Ve=(function(){let e,t;async function i(n){await t.ready;const r=await t.load(n);if(r.length===0)return!1;const a=q(n),o=a.families[0].toLowerCase(),l=a.weight;return r.some(h=>{const u=h.family.replace(/^['"]|['"]$/g,"").toLowerCase(),f=j[h.weight]||h.weight;return u===o&&h.style===a.style&&f==l})}async function s(){await t.ready;let n=!0;const r=O.getProperties(),a=Object.keys(r).filter(o=>r[o]<100);for(let o=a.length-1;o>=0;--o){const l=a[o];let h=r[l];h<100&&(await i(l)?(At(B),O.set(l,100)):(h+=10,O.set(l,h,!0),h<100&&(n=!1)))}e=void 0,n||(e=setTimeout(s,100))}return async function(n){t||(t=K?self.fonts:document.fonts);const r=q(n);if(!r)return;const a=r.families;let o=!1;for(const l of a){if(Zt.has(l))continue;const h=Yt(r.style,r.weight,l);O.get(h)===void 0&&(O.set(h,0,!0),o=!0)}o&&(clearTimeout(e),e=setTimeout(s,100))}})(),Qt=(function(){let e;return function(t){let i=B[t];if(i==null){if(K){const s=q(t),n=yt(t,"Å½g");i=(isNaN(Number(s.lineHeight))?1.2:Number(s.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),i=e.offsetHeight,document.body.removeChild(e);B[t]=i}return i}})();function yt(e,t){return M||(M=m(1,1)),e!=lt&&(M.font=e,lt=M.font),M.measureText(t)}function vt(e,t){return yt(e,t).width}function Te(e,t,i){if(t in i)return i[t];const s=t.split(`
`).reduce((n,r)=>Math.max(n,vt(e,r)),0);return i[t]=s,s}function Je(e,t){const i=[],s=[],n=[];let r=0,a=0,o=0,l=0;for(let h=0,u=t.length;h<=u;h+=2){const f=t[h];if(f===`
`||h===u){r=Math.max(r,a),n.push(a),a=0,o+=l,l=0;continue}const v=t[h+1]||e.font,D=vt(v,f);i.push(D),a+=D;const S=Qt(v);s.push(S),l=Math.max(l,S)}return{width:r,height:o,widths:i,heights:s,lineWidths:n}}function je(e,t,i,s,n,r,a,o,l,h,u){e.save(),i!==1&&(e.globalAlpha===void 0?e.globalAlpha=f=>f.globalAlpha*=i:e.globalAlpha*=i),t&&e.transform.apply(e,t),s.contextInstructions?(e.translate(l,h),e.scale(u[0],u[1]),Ut(s,e)):u[0]<0||u[1]<0?(e.translate(l,h),e.scale(u[0],u[1]),e.drawImage(s,n,r,a,o,0,0,a,o)):e.drawImage(s,n,r,a,o,l,h,a*u[0],o*u[1]),e.restore()}function Ut(e,t){const i=e.contextInstructions;for(let s=0,n=i.length;s<n;s+=2)Array.isArray(i[s+1])?t[i[s]].apply(t,i[s+1]):t[i[s]]=i[s+1]}class A{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new A({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const i=pt(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));i.ready().then(()=>{this.patternImage_=null}),i.getImageState()===c.IDLE&&i.load(),i.getImageState()===c.LOADING&&(this.patternImage_=i)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?xt(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:Y(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class I{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new I({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}function qe(e){return e[0]>0&&e[1]>0}function Be(e,t,i){return i===void 0&&(i=[0,0]),i[0]=e[0]*t+.5|0,i[1]=e[1]*t+.5|0,i}function ht(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}class Q{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=ht(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Q({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return g()}getImage(t){return g()}getHitDetectionImage(){return g()}getPixelRatio(t){return 1}getImageState(){return g()}getImageSize(){return g()}getOrigin(){return g()}getSize(){return g()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ht(t)}listenImageChange(t){g()}load(){g()}unlistenImageChange(t){g()}ready(){return Promise.resolve()}}class U extends Q{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?c.LOADING:c.LOADED,this.imageState_===c.LOADING&&this.ready().then(()=>this.imageState_=c.LOADED),this.render()}clone(){const t=this.getScale(),i=new U({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}getAnchor(){const t=this.size_,i=this.getDisplacement(),s=this.getScaleArray();return[t[0]/2-i[0]/s[0],t[1]/2+i[1]/s[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){const i=this.fill_?.getKey(),s=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${i}`+Object.values(this.renderOptions_).join(",");let n=d.get(s,null,null)?.getImage(1);if(!n){const r=this.renderOptions_,a=Math.ceil(r.size*t),o=m(a,a);this.draw_(r,o,t),n=o.canvas,d.set(s,null,null,new _t(n,void 0,null,c.LOADED,null))}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,i,s){if(i===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return i;let n=this.radius,r=this.radius2_===void 0?n:this.radius2_;if(n<r){const P=n;n=r,r=P}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,l=r*Math.sin(o),h=Math.sqrt(r*r-l*l),u=n-h,f=Math.sqrt(l*l+u*u),v=f/l;if(t==="miter"&&v<=s)return v*i;const D=i/2/v,S=i/2*(u/f),k=Math.sqrt((n+D)*(n+D)+S*S)-n;if(this.radius2_===void 0||t==="bevel")return k*2;const L=n*Math.sin(o),Lt=Math.sqrt(n*n-L*L),X=r-Lt,tt=Math.sqrt(L*L+X*X)/L;if(tt<=s){const P=tt*i/2-r-n;return 2*Math.max(k,P)}return k*2}createRenderOptions(){let t=at,i=ot,s=0,n=null,r=0,a,o=0;this.stroke_&&(a=st(this.stroke_.getColor()??Bt),o=this.stroke_.getWidth()??Kt,n=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset()??0,i=this.stroke_.getLineJoin()??ot,t=this.stroke_.getLineCap()??at,s=this.stroke_.getMiterLimit()??qt);const l=this.calculateLineJoinSize_(i,o,s),h=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*h+l);return{strokeStyle:a,strokeWidth:o,size:u,lineCap:t,lineDash:n,lineDashOffset:r,lineJoin:i,miterLimit:s}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,i,s){if(i.scale(s,s),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){let n=this.fill_.getColor();n===null&&(n=rt),i.fillStyle=st(n),i.fill()}t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineCap=t.lineCap,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}createHitDetectionCanvas_(t){let i;if(this.fill_){let s=this.fill_.getColor(),n=0;typeof s=="string"&&(s=Y(s)),s===null?n=1:Array.isArray(s)&&(n=s.length===4?s[3]:1),n===0&&(i=m(t.size,t.size),this.drawHitDetectionCanvas_(t,i))}return i?i.canvas:this.getImage(1)}createPath_(t){let i=this.points_;const s=this.radius;if(i===1/0)t.arc(0,0,s,0,2*Math.PI);else{const n=this.radius2_===void 0?s:this.radius2_;this.radius2_!==void 0&&(i*=2);const r=this.angle_-Math.PI/2,a=2*Math.PI/i;for(let o=0;o<i;o++){const l=r+o*a,h=o%2===0?s:n;t.lineTo(h*Math.cos(l),h*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=rt,i.fill(),t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}let wt=class It extends U{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),i=new It({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}setRadius(t){this.radius=t,this.render()}};class _{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=ct,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new _({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(i){return i.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=ct,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Ke(e){let t;if(typeof e=="function")t=e;else{let i;Array.isArray(e)?i=e:(Rt(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),i=[e]),t=function(){return i}}return t}let J=null;function Ze(e,t){if(!J){const i=new A({color:"rgba(255,255,255,0.4)"}),s=new I({color:"#3399CC",width:1.25});J=[new _({image:new wt({fill:i,stroke:s,radius:5}),fill:i,stroke:s})]}return J}function Ye(){const e={},t=[255,255,255,1],i=[0,153,255,1],s=3;return e.Polygon=[new _({fill:new A({color:[255,255,255,.5]})})],e.MultiPolygon=e.Polygon,e.LineString=[new _({stroke:new I({color:t,width:s+2})}),new _({stroke:new I({color:i,width:s})})],e.MultiLineString=e.LineString,e.Circle=e.Polygon.concat(e.LineString),e.Point=[new _({image:new wt({radius:s*2,fill:new A({color:i}),stroke:new I({color:t,width:s/2})}),zIndex:1/0})],e.MultiPoint=e.Point,e.GeometryCollection=e.Polygon.concat(e.LineString,e.Point),e}function ct(e){return e.getGeometry()}const b=new _,Dt=e=>e.getStyle()===b,St=e=>e.getStyle()!==b,Xt=e=>{St(e)&&e.setStyle(b)},te=e=>{Dt(e)&&e.setStyle()},Qe=Object.freeze(Object.defineProperty({__proto__:null,InvisibleStyle:b,hideFeature:Xt,isInvisible:Dt,isVisible:St,showFeature:te},Symbol.toStringTag,{value:"Module"}));export{Kt as $,He as A,rt as B,_ as C,oe as D,We as E,Ye as F,Bt as G,Ve as H,Je as I,je as J,Te as K,Ne as L,A as M,Ze as N,bt as O,ue as P,ft as Q,Ge as R,Ce as S,xe as T,U,qt as V,Oe as W,se as X,pe as Y,Q as Z,pt as _,wt as a,Re as a0,ge as a1,O as a2,fe as a3,de as a4,ze as a5,Ie as a6,ye as a7,ve as a8,Me as a9,ce as aa,Be as ab,he as ac,St as ad,me as ae,_e as af,qe as ag,be as ah,De as ai,le as aj,Ae as ak,Ee as al,ke as am,Pe as an,we as ao,d as ap,Qe as aq,ae as b,Gt as c,p as d,ht as e,Le as f,re as g,ie as h,z as i,Y as j,Se as k,Et as l,m,Xt as n,it as o,ne as p,K as q,Ke as r,ot as s,st as t,c as u,at as v,I as w,$e as x,te as y,Fe as z};
