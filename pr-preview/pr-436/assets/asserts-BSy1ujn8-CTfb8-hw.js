const m={PROPERTYCHANGE:"propertychange"},L={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class A{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function x(s,t,n){let e,r;n=n||g;let i=0,o=s.length,l=!1;for(;i<o;)e=i+(o-i>>1),r=+n(s[e],t),r<0?i=e+1:(o=e,l=!r);return l?i:~i}function g(s,t){return s>t?1:s<t?-1:0}function k(s,t){return s<t?1:s>t?-1:0}function b(s,t,n){if(s[0]<=t)return 0;const e=s.length;if(t<=s[e-1])return e-1;if(typeof n=="function"){for(let r=1;r<e;++r){const i=s[r];if(i===t)return r;if(i<t)return n(t,s[r-1],i)>0?r-1:r}return e-1}if(n>0){for(let r=1;r<e;++r)if(s[r]<t)return r-1;return e-1}if(n<0){for(let r=1;r<e;++r)if(s[r]<=t)return r;return e-1}for(let r=1;r<e;++r){if(s[r]==t)return r;if(s[r]<t)return s[r-1]-t<t-s[r]?r-1:r}return e-1}function N(s,t,n){for(;t<n;){const e=s[t];s[t]=s[n],s[n]=e,++t,--n}}function T(s,t){const n=Array.isArray(t)?t:[t],e=n.length;for(let r=0;r<e;r++)s[s.length]=n[r]}function P(s,t){const n=s.length;if(n!==t.length)return!1;for(let e=0;e<n;e++)if(s[e]!==t[e])return!1;return!0}function H(s,t){const n=s.length,e=Array(s.length);let r;for(r=0;r<n;r++)e[r]={index:r,value:s[r]};for(e.sort(function(i,o){return t(i.value,o.value)||i.index-o.index}),r=0;r<s.length;r++)s[r]=e[r].value}function S(s,t,n){const e=t||g;return s.every(function(r,i){if(i===0)return!0;const o=e(s[i-1],r);return!(o>0||o===0)})}function j(){return!0}function K(){return!1}function f(){}function D(s){let t,n,e;return function(){const r=Array.prototype.slice.call(arguments);return(!n||this!==e||!P(r,n))&&(e=this,n=r,t=s.apply(this,arguments)),t}}function G(s){function t(){let n;try{n=s()}catch(e){return Promise.reject(e)}return n instanceof Promise?n:Promise.resolve(n)}return t()}function _(s){for(const t in s)delete s[t]}function R(s){let t;for(t in s)return!1;return!t}class y{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class O extends A{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,n){if(!t||!n)return;const e=this.listeners_||(this.listeners_={}),r=e[t]||(e[t]=[]);r.includes(n)||r.push(n)}dispatchEvent(t){const n=typeof t=="string",e=n?t:t.type,r=this.listeners_&&this.listeners_[e];if(!r)return;const i=n?new y(t):t;i.target||(i.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});e in o||(o[e]=0,l[e]=0),++o[e];let h;for(let u=0,E=r.length;u<E;++u)if("handleEvent"in r[u]?h=r[u].handleEvent(i):h=r[u].call(this,i),h===!1||i.propagationStopped){h=!1;break}if(--o[e]===0){let u=l[e];for(delete l[e];u--;)this.removeEventListener(e,f);delete o[e]}return h}disposeInternal(){this.listeners_&&_(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,n){if(!this.listeners_)return;const e=this.listeners_[t];if(!e)return;const r=e.indexOf(n);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(e[r]=f,++this.pendingRemovals_[t]):(e.splice(r,1),e.length===0&&delete this.listeners_[t]))}}function c(s,t,n,e,r){if(r){const o=n;n=function(l){return s.removeEventListener(t,n),o.call(e??this,l)}}else e&&e!==s&&(n=n.bind(e));const i={target:s,type:t,listener:n};return s.addEventListener(t,n),i}function p(s,t,n,e){return c(s,t,n,e,!0)}function v(s){s&&s.target&&(s.target.removeEventListener(s.type,s.listener),_(s))}class a extends O{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(L.CHANGE)}getRevision(){return this.revision_}onInternal(t,n){if(Array.isArray(t)){const e=t.length,r=new Array(e);for(let i=0;i<e;++i)r[i]=c(this,t[i],n);return r}return c(this,t,n)}onceInternal(t,n){let e;if(Array.isArray(t)){const r=t.length;e=new Array(r);for(let i=0;i<r;++i)e[i]=p(this,t[i],n)}else e=p(this,t,n);return n.ol_key=e,e}unInternal(t,n){const e=n.ol_key;if(e)w(e);else if(Array.isArray(t))for(let r=0,i=t.length;r<i;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)}}a.prototype.on;a.prototype.once;a.prototype.un;function w(s){if(Array.isArray(s))for(let t=0,n=s.length;t<n;++t)v(s[t]);else v(s)}function U(){throw new Error("Unimplemented abstract method.")}let C=0;function I(s){return s.ol_uid||(s.ol_uid=String(++C))}class d extends y{constructor(t,n,e){super(t),this.key=n,this.oldValue=e}}class Y extends a{constructor(t){super(),this.on,this.once,this.un,I(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let e;e=`change:${t}`,this.hasListener(e)&&this.dispatchEvent(new d(e,t,n)),e=m.PROPERTYCHANGE,this.hasListener(e)&&this.dispatchEvent(new d(e,t,n))}addChangeListener(t,n){this.addEventListener(`change:${t}`,n)}removeChangeListener(t,n){this.removeEventListener(`change:${t}`,n)}set(t,n,e){const r=this.values_||(this.values_={});if(e)r[t]=n;else{const i=r[t];r[t]=n,i!==n&&this.notify(t,i)}}setProperties(t,n){for(const e in t)this.set(e,t[e],n)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,n){if(this.values_&&t in this.values_){const e=this.values_[t];delete this.values_[t],R(this.values_)&&(this.values_=null),n||this.notify(t,e)}}}function V(s,t){if(!s)throw new Error(t)}export{P as A,K as B,x as C,j as D,y as E,V as F,G,D as H,k as I,T as K,L,H as N,A as O,R as P,O as R,b as S,U,Y as V,g as _,a,N as b,c,p as d,f,_ as g,S as j,v as p,w,I as x,m as y};
