import{i as o}from"./Feature-CUNTJeri-jt2nLCGJ.js";import"./asserts-segPWjJo-pcJD3tIw.js";function i(a,t){const e=Object.fromEntries(["Y","M","D"].map(r=>[r,""]));return t.split("").forEach((r,n)=>{r in e&&typeof e[r]=="string"&&(e[r]+=a[n]||"")}),new Date(Number(e.Y),Number(e.M)-1,Number(e.D))}if(import.meta.vitest){const{expect:a,test:t}=import.meta.vitest;t.for([{date:"2025-07-01",pattern:"YYYY-MM-DD",expected:new Date("Jul 1, 2025")},{date:"202-521-12X",pattern:"YYY-YDM-MD-",expected:new Date("Nov 22, 2025")},{date:"2026-01",pattern:"YYYY-MM-DD",expected:new Date("Dec 31, 2025")}])("parseDateWithPattern works as expected",({date:e,pattern:r,expected:n})=>{a(i(e,r)).toEqual(n)})}function s(a,t){return!(t.knownValues&&!Object.entries(t.knownValues).every(([e,r])=>r[a.get(e)])||t.timeSpan&&!Object.entries(t.timeSpan).every(([e,r])=>{const n=i(a.get(e),r.pattern);return n>=r.from&&n<r.until}))}if(import.meta.vitest){const{expect:a,test:t}=import.meta.vitest,e=new o;e.set("category","blue"),e.set("time","2025-01-01"),t("a feature passes an empty filter",()=>{a(s(e,{})).toBeTruthy()}),t("a feature passes the category filter",()=>{a(s(e,{knownValues:{category:{blue:!0}}})).toBeTruthy()}),t("a feature fails the category filter",()=>{a(s(e,{knownValues:{category:{red:!0}}})).toBeFalsy()}),t("a feature passes the time filter",()=>{a(s(e,{timeSpan:{time:{pattern:"YYYY-MM-DD",from:new Date("Jan 1, 2024"),until:new Date("Dec 31, 2026")}}})).toBeTruthy()}),t("a feature fails the time filter",()=>{a(s(e,{timeSpan:{time:{pattern:"YYYY-MM-DD",from:new Date("Jan 1, 2024"),until:new Date("Dec 31, 2024")}}})).toBeFalsy()}),t("a feature fails one out of two filters",()=>{a(s(e,{knownValues:{category:{blue:!0},misc:{yes:!0}}})).toBeFalsy()})}export{s as doesFeaturePassFilter};
